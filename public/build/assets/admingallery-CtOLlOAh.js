import{r as l,j as i,R as U,u as Pn}from"./app-BYQ5orwo.js";import{A as Pt}from"./AdminLayout-BLenSwiM.js";import{m as Y,e as Ft}from"./proxy-DIxSLhn2.js";import{X as gt}from"./x-DOEcAzWN.js";import{c as we}from"./createLucideIcon-Di2EG7F4.js";import{C as Fn}from"./circle-alert-CGJtLzFL.js";import{r as Te}from"./index-CixesRgE.js";import{S as en,T as tn}from"./trash-2-DzGMwJu1.js";import{C as Un}from"./index.module-D2VLlL43.js";import{C as $n}from"./AdminConfirmationModal-Dzfjrj_P.js";import"./menu-mRmQzJ7P.js";import"./tslib.es6-CwyXKlH1.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]],_n=we("Crop",Bn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gn=we("Eye",Xn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ut=we("Image",Wn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]],nn=we("StarOff",qn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rn=we("Star",Hn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],on=we("Upload",Yn),Kn=({onClose:e,onSuccess:t})=>{const[n,r]=l.useState([]),[o,s]=l.useState([]),[a,d]=l.useState(!1),[u,c]=l.useState(!1),h=l.useRef(null),f=g=>{g.preventDefault(),g.stopPropagation(),g.type==="dragenter"||g.type==="dragover"?c(!0):g.type==="dragleave"&&c(!1)},p=g=>{g.preventDefault(),g.stopPropagation(),c(!1),g.dataTransfer.files&&g.dataTransfer.files[0]&&y(Array.from(g.dataTransfer.files))},m=g=>{g.target.files&&y(Array.from(g.target.files))},y=g=>{const w=g.filter(D=>{const C=D.type.startsWith("image/"),b=D.size<=10*1024*1024;return C&&b});r(D=>[...D,...w])},x=g=>{r(w=>w.filter((D,C)=>C!==g))},S=async()=>{var D;if(n.length===0)return;d(!0);const g=new FormData;n.forEach((C,b)=>{g.append(`images[${b}]`,C)});const w=n.map(C=>({file:C,progress:0,status:"uploading"}));s(w);try{console.log("Starting upload with files:",n.length),console.log("FormData contents:",Array.from(g.entries()));const C=await fetch("/admin/api/gallery-images/upload",{method:"POST",headers:{"X-CSRF-TOKEN":((D=document.querySelector('meta[name="csrf-token"]'))==null?void 0:D.getAttribute("content"))||"",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:g});if(console.log("Upload response status:",C.status),console.log("Upload response headers:",Object.fromEntries(C.headers.entries())),C.ok){const b=await C.json();console.log("Upload successful:",b),s(v=>v.map(N=>({...N,progress:100,status:"success"}))),setTimeout(()=>{t()},1e3)}else{console.error("Upload failed with status:",C.status);const b=await C.text();console.error("Response text:",b);let v;try{v=JSON.parse(b)}catch(N){console.error("Failed to parse error response as JSON:",N),v={message:b||"Upload failed"}}throw new Error(v.message||"Upload failed")}}catch(C){console.error("Upload error:",C),s(b=>b.map(v=>({...v,progress:0,status:"error",error:C instanceof Error?C.message:"Upload failed"})))}finally{d(!1)}},R=g=>{if(g===0)return"0 Bytes";const w=1024,D=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(g)/Math.log(w));return parseFloat((g/Math.pow(w,C)).toFixed(2))+" "+D[C]};return i.jsx(Y.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs(Y.div,{className:"bg-white w-full max-w-2xl max-h-[90vh] overflow-y-auto",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsx("h2",{className:"text-xl font-lexend font-light text-olive",children:"Upload Gallery Images"}),i.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx(gt,{size:24})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:`border-2 border-dashed rounded-none p-8 text-center transition-colors ${u?"border-olive bg-olive/5":"border-gray-300 hover:border-olive"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:p,children:[i.jsx(Ut,{size:48,className:"mx-auto text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-600 mb-2 font-lexend",children:"Drag and drop images here, or click to select"}),i.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"PNG, JPG, JPEG up to 10MB each"}),i.jsx("button",{onClick:()=>{var g;return(g=h.current)==null?void 0:g.click()},className:"bg-olive text-beige px-4 py-2 font-lexend font-light text-sm uppercase tracking-wider hover:bg-olive/90 transition-all duration-300",children:"Select Images"}),i.jsx("input",{ref:h,type:"file",multiple:!0,accept:"image/*",onChange:m,className:"hidden"})]}),n.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("h3",{className:"font-lexend font-light text-olive",children:["Selected Files (",n.length,")"]}),i.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:n.map((g,w)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ut,{size:20,className:"text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-lexend text-gray-700",children:g.name}),i.jsx("p",{className:"text-xs text-gray-500",children:R(g.size)})]})]}),i.jsx("button",{onClick:()=>x(w),className:"text-red-500 hover:text-red-700 transition-colors",children:i.jsx(gt,{size:16})})]},w))})]}),o.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-lexend font-light text-olive",children:"Upload Progress"}),o.map((g,w)=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-lexend text-gray-700",children:g.file.name}),i.jsxs("span",{className:"text-sm text-gray-500",children:[g.status==="uploading"&&`${g.progress}%`,g.status==="success"&&"✓ Complete",g.status==="error"&&"✗ Failed"]})]}),i.jsx("div",{className:"w-full bg-gray-200 h-2",children:i.jsx("div",{className:`h-2 transition-all duration-300 ${g.status==="success"?"bg-green-500":g.status==="error"?"bg-red-500":"bg-olive"}`,style:{width:`${g.progress}%`}})}),g.error&&i.jsxs("p",{className:"text-xs text-red-500 flex items-center",children:[i.jsx(Fn,{size:12,className:"mr-1"}),g.error]})]},w))]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-lexend font-light transition-colors",children:"Cancel"}),i.jsx("button",{onClick:S,disabled:n.length===0||a,className:"bg-olive text-beige px-6 py-2 font-lexend font-light text-sm uppercase tracking-wider hover:bg-olive/90 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-beige"}),i.jsx("span",{children:"Uploading..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(on,{size:16}),i.jsxs("span",{children:["Upload ",n.length," Image",n.length!==1?"s":""]})]})})]})]})]})})};function Vn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ce(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function yt(e){return"nodeType"in e}function $(e){var t,n;return e?Ce(e)?e:yt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function wt(e){const{Document:t}=$(e);return e instanceof t}function Be(e){return Ce(e)?!1:e instanceof $(e).HTMLElement}function sn(e){return e instanceof $(e).SVGElement}function Se(e){return e?Ce(e)?e.document:yt(e)?wt(e)?e:Be(e)||sn(e)?e.ownerDocument:document:document:document}const ee=rt?l.useLayoutEffect:l.useEffect;function Ct(e){const t=l.useRef(e);return ee(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Jn(){const e=l.useRef(null),t=l.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Pe(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return ee(()=>{n.current!==e&&(n.current=e)},t),n}function _e(e,t){const n=l.useRef();return l.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Qe(e){const t=Ct(e),n=l.useRef(null),r=l.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function pt(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let dt={};function Xe(e,t){return l.useMemo(()=>{if(t)return t;const n=dt[e]==null?0:dt[e]+1;return dt[e]=n,e+"-"+n},[e,t])}function an(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,a)=>{const d=Object.entries(a);for(const[u,c]of d){const h=s[u];h!=null&&(s[u]=h+e*c)}return s},{...t})}}const ye=an(1),Fe=an(-1);function Zn(e){return"clientX"in e&&"clientY"in e}function St(e){if(!e)return!1;const{KeyboardEvent:t}=$(e.target);return t&&e instanceof t}function Qn(e){if(!e)return!1;const{TouchEvent:t}=$(e.target);return t&&e instanceof t}function mt(e){if(Qn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Zn(e)?{x:e.clientX,y:e.clientY}:null}const Ue=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Ue.Translate.toString(e),Ue.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),$t="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function er(e){return e.matches($t)?e:e.querySelector($t)}const tr={display:"none"};function nr(e){let{id:t,value:n}=e;return U.createElement("div",{id:t,style:tr},n)}function rr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return U.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function or(){const[e,t]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const ln=l.createContext(null);function sr(e){const t=l.useContext(ln);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ir(){const[e]=l.useState(()=>new Set),t=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:o,event:s}=r;e.forEach(a=>{var d;return(d=a[o])==null?void 0:d.call(a,s)})},[e]),t]}const ar={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},lr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function cr(e){let{announcements:t=lr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=ar}=e;const{announce:s,announcement:a}=or(),d=Xe("DndLiveRegion"),[u,c]=l.useState(!1);if(l.useEffect(()=>{c(!0)},[]),sr(l.useMemo(()=>({onDragStart(f){let{active:p}=f;s(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:m}=f;t.onDragMove&&s(t.onDragMove({active:p,over:m}))},onDragOver(f){let{active:p,over:m}=f;s(t.onDragOver({active:p,over:m}))},onDragEnd(f){let{active:p,over:m}=f;s(t.onDragEnd({active:p,over:m}))},onDragCancel(f){let{active:p,over:m}=f;s(t.onDragCancel({active:p,over:m}))}}),[s,t])),!u)return null;const h=U.createElement(U.Fragment,null,U.createElement(nr,{id:r,value:o.draggable}),U.createElement(rr,{id:d,announcement:a}));return n?Te.createPortal(h,n):h}var T;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(T||(T={}));function et(){}function Bt(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function dr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const K=Object.freeze({x:0,y:0});function cn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function dn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ur(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function _t(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function un(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Xt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const fr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Xt(t,t.left,t.top),s=[];for(const a of r){const{id:d}=a,u=n.get(d);if(u){const c=cn(Xt(u),o);s.push({id:d,data:{droppableContainer:a,value:c}})}}return s.sort(dn)},hr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=_t(t),s=[];for(const a of r){const{id:d}=a,u=n.get(d);if(u){const c=_t(u),h=o.reduce((p,m,y)=>p+cn(c[y],m),0),f=Number((h/4).toFixed(4));s.push({id:d,data:{droppableContainer:a,value:f}})}}return s.sort(dn)};function gr(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=o-r,d=s-n;if(r<o&&n<s){const u=t.width*t.height,c=e.width*e.height,h=a*d,f=h/(u+c-h);return Number(f.toFixed(4))}return 0}const pr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:a}=s,d=n.get(a);if(d){const u=gr(d,t);u>0&&o.push({id:a,data:{droppableContainer:s,value:u}})}}return o.sort(ur)};function mr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function fn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:K}function vr(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((a,d)=>({...a,top:a.top+e*d.y,bottom:a.bottom+e*d.y,left:a.left+e*d.x,right:a.right+e*d.x}),{...n})}}const xr=vr(1);function br(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function yr(e,t,n){const r=br(t);if(!r)return e;const{scaleX:o,scaleY:s,x:a,y:d}=r,u=e.left-a-(1-o)*parseFloat(n),c=e.top-d-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=o?e.width/o:e.width,f=s?e.height/s:e.height;return{width:h,height:f,top:c,right:u+h,bottom:c+f,left:u}}const wr={ignoreTransform:!1};function Ne(e,t){t===void 0&&(t=wr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:h}=$(e).getComputedStyle(e);c&&(n=yr(n,c,h))}const{top:r,left:o,width:s,height:a,bottom:d,right:u}=n;return{top:r,left:o,width:s,height:a,bottom:d,right:u}}function Gt(e){return Ne(e,{ignoreTransform:!0})}function Cr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Sr(e,t){return t===void 0&&(t=$(e).getComputedStyle(e)),t.position==="fixed"}function Nr(e,t){t===void 0&&(t=$(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function ot(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(wt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Be(o)||sn(o)||n.includes(o))return n;const s=$(e).getComputedStyle(o);return o!==e&&Nr(o,s)&&n.push(o),Sr(o,s)?n:r(o.parentNode)}return e?r(e):n}function hn(e){const[t]=ot(e,1);return t??null}function ut(e){return!rt||!e?null:Ce(e)?e:yt(e)?wt(e)||e===Se(e).scrollingElement?window:Be(e)?e:null:null}function gn(e){return Ce(e)?e.scrollX:e.scrollLeft}function pn(e){return Ce(e)?e.scrollY:e.scrollTop}function vt(e){return{x:gn(e),y:pn(e)}}var L;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(L||(L={}));function mn(e){return!rt||!e?!1:e===document.scrollingElement}function vn(e){const t={x:0,y:0},n=mn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,d=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:a,isRight:d,maxScroll:r,minScroll:t}}const Dr={x:.2,y:.2};function jr(e,t,n,r,o){let{top:s,left:a,right:d,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=Dr);const{isTop:c,isBottom:h,isLeft:f,isRight:p}=vn(e),m={x:0,y:0},y={x:0,y:0},x={height:t.height*o.y,width:t.width*o.x};return!c&&s<=t.top+x.height?(m.y=L.Backward,y.y=r*Math.abs((t.top+x.height-s)/x.height)):!h&&u>=t.bottom-x.height&&(m.y=L.Forward,y.y=r*Math.abs((t.bottom-x.height-u)/x.height)),!p&&d>=t.right-x.width?(m.x=L.Forward,y.x=r*Math.abs((t.right-x.width-d)/x.width)):!f&&a<=t.left+x.width&&(m.x=L.Backward,y.x=r*Math.abs((t.left+x.width-a)/x.width)),{direction:m,speed:y}}function Rr(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function xn(e){return e.reduce((t,n)=>ye(t,vt(n)),K)}function Er(e){return e.reduce((t,n)=>t+gn(n),0)}function Ir(e){return e.reduce((t,n)=>t+pn(n),0)}function Mr(e,t){if(t===void 0&&(t=Ne),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);hn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ar=[["x",["left","right"],Er],["y",["top","bottom"],Ir]];class Nt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ot(n),o=xn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,d]of Ar)for(const u of a)Object.defineProperty(this,u,{get:()=>{const c=d(r),h=o[s]-c;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Oe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function kr(e){const{EventTarget:t}=$(e);return e instanceof t?e:Se(e)}function ft(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var H;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(H||(H={}));function Wt(e){e.preventDefault()}function Tr(e){e.stopPropagation()}var I;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(I||(I={}));const bn={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter,I.Tab]},Or=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case I.Right:return{...n,x:n.x+25};case I.Left:return{...n,x:n.x-25};case I.Down:return{...n,y:n.y+25};case I.Up:return{...n,y:n.y-25}}};class Dt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Oe(Se(n)),this.windowListeners=new Oe($(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(H.Resize,this.handleCancel),this.windowListeners.add(H.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(H.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Mr(r),n(K)}handleKeyDown(t){if(St(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=bn,coordinateGetter:a=Or,scrollBehavior:d="smooth"}=o,{code:u}=t;if(s.end.includes(u)){this.handleEnd(t);return}if(s.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,h=c?{x:c.left,y:c.top}:K;this.referenceCoordinates||(this.referenceCoordinates=h);const f=a(t,{active:n,context:r.current,currentCoordinates:h});if(f){const p=Fe(f,h),m={x:0,y:0},{scrollableAncestors:y}=r.current;for(const x of y){const S=t.code,{isTop:R,isRight:g,isLeft:w,isBottom:D,maxScroll:C,minScroll:b}=vn(x),v=Rr(x),N={x:Math.min(S===I.Right?v.right-v.width/2:v.right,Math.max(S===I.Right?v.left:v.left+v.width/2,f.x)),y:Math.min(S===I.Down?v.bottom-v.height/2:v.bottom,Math.max(S===I.Down?v.top:v.top+v.height/2,f.y))},M=S===I.Right&&!g||S===I.Left&&!w,j=S===I.Down&&!D||S===I.Up&&!R;if(M&&N.x!==f.x){const E=x.scrollLeft+p.x,k=S===I.Right&&E<=C.x||S===I.Left&&E>=b.x;if(k&&!p.y){x.scrollTo({left:E,behavior:d});return}k?m.x=x.scrollLeft-E:m.x=S===I.Right?x.scrollLeft-C.x:x.scrollLeft-b.x,m.x&&x.scrollBy({left:-m.x,behavior:d});break}else if(j&&N.y!==f.y){const E=x.scrollTop+p.y,k=S===I.Down&&E<=C.y||S===I.Up&&E>=b.y;if(k&&!p.x){x.scrollTo({top:E,behavior:d});return}k?m.y=x.scrollTop-E:m.y=S===I.Down?x.scrollTop-C.y:x.scrollTop-b.y,m.y&&x.scrollBy({top:-m.y,behavior:d});break}}this.handleMove(t,ye(Fe(f,this.referenceCoordinates),m))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Dt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=bn,onActivation:o}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const d=s.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function qt(e){return!!(e&&"distance"in e)}function Ht(e){return!!(e&&"delay"in e)}class jt{constructor(t,n,r){var o;r===void 0&&(r=kr(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=Se(a),this.documentListeners=new Oe(this.document),this.listeners=new Oe(r),this.windowListeners=new Oe($(a)),this.initialCoordinates=(o=mt(s))!=null?o:K,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(H.Resize,this.handleCancel),this.windowListeners.add(H.DragStart,Wt),this.windowListeners.add(H.VisibilityChange,this.handleCancel),this.windowListeners.add(H.ContextMenu,Wt),this.documentListeners.add(H.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ht(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(qt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(H.Click,Tr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(H.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:a,options:{activationConstraint:d}}=s;if(!o)return;const u=(n=mt(t))!=null?n:K,c=Fe(o,u);if(!r&&d){if(qt(d)){if(d.tolerance!=null&&ft(c,d.tolerance))return this.handleCancel();if(ft(c,d.distance))return this.handleStart()}if(Ht(d)&&ft(c,d.tolerance))return this.handleCancel();this.handlePending(d,c);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===I.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Lr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Rt extends jt{constructor(t){const{event:n}=t,r=Se(n.target);super(t,Lr,r)}}Rt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const zr={move:{name:"mousemove"},end:{name:"mouseup"}};var xt;(function(e){e[e.RightClick=2]="RightClick"})(xt||(xt={}));class Pr extends jt{constructor(t){super(t,zr,Se(t.event.target))}}Pr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===xt.RightClick?!1:(r==null||r({event:n}),!0)}}];const ht={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Fr extends jt{constructor(t){super(t,ht)}static setup(){return window.addEventListener(ht.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ht.move.name,t)};function t(){}}}Fr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Le;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Le||(Le={}));var tt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(tt||(tt={}));function Ur(e){let{acceleration:t,activator:n=Le.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:a=5,order:d=tt.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:h,delta:f,threshold:p}=e;const m=Br({delta:f,disabled:!s}),[y,x]=Jn(),S=l.useRef({x:0,y:0}),R=l.useRef({x:0,y:0}),g=l.useMemo(()=>{switch(n){case Le.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Le.DraggableRect:return o}},[n,o,u]),w=l.useRef(null),D=l.useCallback(()=>{const b=w.current;if(!b)return;const v=S.current.x*R.current.x,N=S.current.y*R.current.y;b.scrollBy(v,N)},[]),C=l.useMemo(()=>d===tt.TreeOrder?[...c].reverse():c,[d,c]);l.useEffect(()=>{if(!s||!c.length||!g){x();return}for(const b of C){if((r==null?void 0:r(b))===!1)continue;const v=c.indexOf(b),N=h[v];if(!N)continue;const{direction:M,speed:j}=jr(b,N,g,t,p);for(const E of["x","y"])m[E][M[E]]||(j[E]=0,M[E]=0);if(j.x>0||j.y>0){x(),w.current=b,y(D,a),S.current=j,R.current=M;return}}S.current={x:0,y:0},R.current={x:0,y:0},x()},[t,D,r,x,s,a,JSON.stringify(g),JSON.stringify(m),y,c,C,h,JSON.stringify(p)])}const $r={x:{[L.Backward]:!1,[L.Forward]:!1},y:{[L.Backward]:!1,[L.Forward]:!1}};function Br(e){let{delta:t,disabled:n}=e;const r=pt(t);return _e(o=>{if(n||!r||!o)return $r;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[L.Backward]:o.x[L.Backward]||s.x===-1,[L.Forward]:o.x[L.Forward]||s.x===1},y:{[L.Backward]:o.y[L.Backward]||s.y===-1,[L.Forward]:o.y[L.Forward]||s.y===1}}},[n,t,r])}function _r(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return _e(o=>{var s;return t==null?null:(s=r??o)!=null?s:null},[r,t])}function Xr(e,t){return l.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var $e;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})($e||($e={}));var bt;(function(e){e.Optimized="optimized"})(bt||(bt={}));const Yt=new Map;function Gr(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,a]=l.useState(null),{frequency:d,measure:u,strategy:c}=o,h=l.useRef(e),f=S(),p=Pe(f),m=l.useCallback(function(R){R===void 0&&(R=[]),!p.current&&a(g=>g===null?R:g.concat(R.filter(w=>!g.includes(w))))},[p]),y=l.useRef(null),x=_e(R=>{if(f&&!n)return Yt;if(!R||R===Yt||h.current!==e||s!=null){const g=new Map;for(let w of e){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){g.set(w.id,w.rect.current);continue}const D=w.node.current,C=D?new Nt(u(D),D):null;w.rect.current=C,C&&g.set(w.id,C)}return g}return R},[e,s,n,f,u]);return l.useEffect(()=>{h.current=e},[e]),l.useEffect(()=>{f||m()},[n,f]),l.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),l.useEffect(()=>{f||typeof d!="number"||y.current!==null||(y.current=setTimeout(()=>{m(),y.current=null},d))},[d,f,m,...r]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:s!=null};function S(){switch(c){case $e.Always:return!1;case $e.BeforeDragging:return n;default:return!n}}}function yn(e,t){return _e(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Wr(e,t){return yn(e,t)}function qr(e){let{callback:t,disabled:n}=e;const r=Ct(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function st(e){let{callback:t,disabled:n}=e;const r=Ct(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Hr(e){return new Nt(Ne(e),e)}function Kt(e,t,n){t===void 0&&(t=Hr);const[r,o]=l.useState(null);function s(){o(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const a=qr({callback(u){if(e)for(const c of u){const{type:h,target:f}=c;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),d=st({callback:s});return ee(()=>{s(),e?(d==null||d.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(d==null||d.disconnect(),a==null||a.disconnect())},[e]),r}function Yr(e){const t=yn(e);return fn(e,t)}const Vt=[];function Kr(e){const t=l.useRef(e),n=_e(r=>e?r&&r!==Vt&&e&&t.current&&e.parentNode===t.current.parentNode?r:ot(e):Vt,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function Vr(e){const[t,n]=l.useState(null),r=l.useRef(e),o=l.useCallback(s=>{const a=ut(s.target);a&&n(d=>d?(d.set(a,vt(a)),new Map(d)):null)},[]);return l.useEffect(()=>{const s=r.current;if(e!==s){a(s);const d=e.map(u=>{const c=ut(u);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,vt(c)]):null}).filter(u=>u!=null);n(d.length?new Map(d):null),r.current=e}return()=>{a(e),a(s)};function a(d){d.forEach(u=>{const c=ut(u);c==null||c.removeEventListener("scroll",o)})}},[o,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>ye(s,a),K):xn(e):K,[e,t])}function Jt(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const r=e!==K;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Fe(e,n.current):K}function Jr(e){l.useEffect(()=>{if(!rt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Zr(e,t){return l.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=a=>{s(a,t)},n},{}),[e,t])}function wn(e){return l.useMemo(()=>e?Cr(e):null,[e])}const Zt=[];function Qr(e,t){t===void 0&&(t=Ne);const[n]=e,r=wn(n?$(n):null),[o,s]=l.useState(Zt);function a(){s(()=>e.length?e.map(u=>mn(u)?r:new Nt(t(u),u)):Zt)}const d=st({callback:a});return ee(()=>{d==null||d.disconnect(),a(),e.forEach(u=>d==null?void 0:d.observe(u))},[e]),o}function eo(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Be(t)?t:e}function to(e){let{measure:t}=e;const[n,r]=l.useState(null),o=l.useCallback(c=>{for(const{target:h}of c)if(Be(h)){r(f=>{const p=t(h);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),s=st({callback:o}),a=l.useCallback(c=>{const h=eo(c);s==null||s.disconnect(),h&&(s==null||s.observe(h)),r(h?t(h):null)},[t,s]),[d,u]=Qe(a);return l.useMemo(()=>({nodeRef:d,rect:n,setRef:u}),[n,d,u])}const no=[{sensor:Rt,options:{}},{sensor:Dt,options:{}}],ro={current:{}},Ze={draggable:{measure:Gt},droppable:{measure:Gt,strategy:$e.WhileDragging,frequency:bt.Optimized},dragOverlay:{measure:Ne}};class ze extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const oo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ze,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:et},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ze,measureDroppableContainers:et,windowRect:null,measuringScheduled:!1},so={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:et,draggableNodes:new Map,over:null,measureDroppableContainers:et},it=l.createContext(so),Cn=l.createContext(oo);function io(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ze}}}function ao(e,t){switch(t.type){case T.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case T.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case T.DragEnd:case T.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case T.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new ze(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case T.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new ze(e.droppable.containers);return a.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:a}}}case T.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new ze(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function lo(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=l.useContext(it),s=pt(r),a=pt(n==null?void 0:n.id);return l.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!St(s)||document.activeElement===s.target)return;const d=o.get(a);if(!d)return;const{activatorNode:u,node:c}=d;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const h of[u.current,c.current]){if(!h)continue;const f=er(h);if(f){f.focus();break}}})}},[r,t,o,a,s]),null}function co(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function uo(e){return l.useMemo(()=>({draggable:{...Ze.draggable,...e==null?void 0:e.draggable},droppable:{...Ze.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ze.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function fo(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=l.useRef(!1),{x:a,y:d}=typeof o=="boolean"?{x:o,y:o}:o;ee(()=>{if(!a&&!d||!t){s.current=!1;return}if(s.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const h=n(c),f=fn(h,r);if(a||(f.x=0),d||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=hn(c);p&&p.scrollBy({top:f.y,left:f.x})}},[t,a,d,r,n])}const Sn=l.createContext({...K,scaleX:1,scaleY:1});var fe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(fe||(fe={}));const ho=l.memo(function(t){var n,r,o,s;let{id:a,accessibility:d,autoScroll:u=!0,children:c,sensors:h=no,collisionDetection:f=pr,measuring:p,modifiers:m,...y}=t;const x=l.useReducer(ao,void 0,io),[S,R]=x,[g,w]=ir(),[D,C]=l.useState(fe.Uninitialized),b=D===fe.Initialized,{draggable:{active:v,nodes:N,translate:M},droppable:{containers:j}}=S,E=v!=null?N.get(v):null,k=l.useRef({initial:null,translated:null}),O=l.useMemo(()=>{var P;return v!=null?{id:v,data:(P=E==null?void 0:E.data)!=null?P:ro,rect:k}:null},[v,E]),V=l.useRef(null),[De,Ge]=l.useState(null),[B,We]=l.useState(null),te=Pe(y,Object.values(y)),je=Xe("DndDescribedBy",a),qe=l.useMemo(()=>j.getEnabled(),[j]),F=uo(p),{droppableRects:ne,measureDroppableContainers:he,measuringScheduled:Re}=Gr(qe,{dragging:b,dependencies:[M.x,M.y],config:F.droppable}),W=_r(N,v),He=l.useMemo(()=>B?mt(B):null,[B]),ie=zn(),re=Wr(W,F.draggable.measure);fo({activeNode:v!=null?N.get(v):null,config:ie.layoutShiftCompensation,initialRect:re,measure:F.draggable.measure});const A=Kt(W,F.draggable.measure,re),Ee=Kt(W?W.parentElement:null),J=l.useRef({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ge=j.getNodeFor((n=J.current.over)==null?void 0:n.id),oe=to({measure:F.dragOverlay.measure}),pe=(r=oe.nodeRef.current)!=null?r:W,me=b?(o=oe.rect)!=null?o:A:null,It=!!(oe.nodeRef.current&&oe.rect),Mt=Yr(It?null:A),at=wn(pe?$(pe):null),ae=Kr(b?ge??W:null),Ye=Qr(ae),Ke=co(m,{transform:{x:M.x-Mt.x,y:M.y-Mt.y,scaleX:1,scaleY:1},activatorEvent:B,active:O,activeNodeRect:A,containerNodeRect:Ee,draggingNodeRect:me,over:J.current.over,overlayNodeRect:oe.rect,scrollableAncestors:ae,scrollableAncestorRects:Ye,windowRect:at}),At=He?ye(He,M):null,kt=Vr(ae),In=Jt(kt),Mn=Jt(kt,[A]),ve=ye(Ke,In),xe=me?xr(me,Ke):null,Ie=O&&xe?f({active:O,collisionRect:xe,droppableRects:ne,droppableContainers:qe,pointerCoordinates:At}):null,Tt=un(Ie,"id"),[le,Ot]=l.useState(null),An=It?Ke:ye(Ke,Mn),kn=mr(An,(s=le==null?void 0:le.rect)!=null?s:null,A),lt=l.useRef(null),Lt=l.useCallback((P,_)=>{let{sensor:X,options:ce}=_;if(V.current==null)return;const q=N.get(V.current);if(!q)return;const G=P.nativeEvent,Z=new X({active:V.current,activeNode:q,event:G,options:ce,context:J,onAbort(z){if(!N.get(z))return;const{onDragAbort:Q}=te.current,se={id:z};Q==null||Q(se),g({type:"onDragAbort",event:se})},onPending(z,de,Q,se){if(!N.get(z))return;const{onDragPending:Ae}=te.current,ue={id:z,constraint:de,initialCoordinates:Q,offset:se};Ae==null||Ae(ue),g({type:"onDragPending",event:ue})},onStart(z){const de=V.current;if(de==null)return;const Q=N.get(de);if(!Q)return;const{onDragStart:se}=te.current,Me={activatorEvent:G,active:{id:de,data:Q.data,rect:k}};Te.unstable_batchedUpdates(()=>{se==null||se(Me),C(fe.Initializing),R({type:T.DragStart,initialCoordinates:z,active:de}),g({type:"onDragStart",event:Me}),Ge(lt.current),We(G)})},onMove(z){R({type:T.DragMove,coordinates:z})},onEnd:be(T.DragEnd),onCancel:be(T.DragCancel)});lt.current=Z;function be(z){return async function(){const{active:Q,collisions:se,over:Me,scrollAdjustedTranslate:Ae}=J.current;let ue=null;if(Q&&Ae){const{cancelDrop:ke}=te.current;ue={activatorEvent:G,active:Q,collisions:se,delta:Ae,over:Me},z===T.DragEnd&&typeof ke=="function"&&await Promise.resolve(ke(ue))&&(z=T.DragCancel)}V.current=null,Te.unstable_batchedUpdates(()=>{R({type:z}),C(fe.Uninitialized),Ot(null),Ge(null),We(null),lt.current=null;const ke=z===T.DragEnd?"onDragEnd":"onDragCancel";if(ue){const ct=te.current[ke];ct==null||ct(ue),g({type:ke,event:ue})}})}}},[N]),Tn=l.useCallback((P,_)=>(X,ce)=>{const q=X.nativeEvent,G=N.get(ce);if(V.current!==null||!G||q.dndKit||q.defaultPrevented)return;const Z={active:G};P(X,_.options,Z)===!0&&(q.dndKit={capturedBy:_.sensor},V.current=ce,Lt(X,_))},[N,Lt]),zt=Xr(h,Tn);Jr(h),ee(()=>{A&&D===fe.Initializing&&C(fe.Initialized)},[A,D]),l.useEffect(()=>{const{onDragMove:P}=te.current,{active:_,activatorEvent:X,collisions:ce,over:q}=J.current;if(!_||!X)return;const G={active:_,activatorEvent:X,collisions:ce,delta:{x:ve.x,y:ve.y},over:q};Te.unstable_batchedUpdates(()=>{P==null||P(G),g({type:"onDragMove",event:G})})},[ve.x,ve.y]),l.useEffect(()=>{const{active:P,activatorEvent:_,collisions:X,droppableContainers:ce,scrollAdjustedTranslate:q}=J.current;if(!P||V.current==null||!_||!q)return;const{onDragOver:G}=te.current,Z=ce.get(Tt),be=Z&&Z.rect.current?{id:Z.id,rect:Z.rect.current,data:Z.data,disabled:Z.disabled}:null,z={active:P,activatorEvent:_,collisions:X,delta:{x:q.x,y:q.y},over:be};Te.unstable_batchedUpdates(()=>{Ot(be),G==null||G(z),g({type:"onDragOver",event:z})})},[Tt]),ee(()=>{J.current={activatorEvent:B,active:O,activeNode:W,collisionRect:xe,collisions:Ie,droppableRects:ne,draggableNodes:N,draggingNode:pe,draggingNodeRect:me,droppableContainers:j,over:le,scrollableAncestors:ae,scrollAdjustedTranslate:ve},k.current={initial:me,translated:xe}},[O,W,Ie,xe,N,pe,me,ne,j,le,ae,ve]),Ur({...ie,delta:M,draggingRect:xe,pointerCoordinates:At,scrollableAncestors:ae,scrollableAncestorRects:Ye});const On=l.useMemo(()=>({active:O,activeNode:W,activeNodeRect:A,activatorEvent:B,collisions:Ie,containerNodeRect:Ee,dragOverlay:oe,draggableNodes:N,droppableContainers:j,droppableRects:ne,over:le,measureDroppableContainers:he,scrollableAncestors:ae,scrollableAncestorRects:Ye,measuringConfiguration:F,measuringScheduled:Re,windowRect:at}),[O,W,A,B,Ie,Ee,oe,N,j,ne,le,he,ae,Ye,F,Re,at]),Ln=l.useMemo(()=>({activatorEvent:B,activators:zt,active:O,activeNodeRect:A,ariaDescribedById:{draggable:je},dispatch:R,draggableNodes:N,over:le,measureDroppableContainers:he}),[B,zt,O,A,R,je,N,le,he]);return U.createElement(ln.Provider,{value:w},U.createElement(it.Provider,{value:Ln},U.createElement(Cn.Provider,{value:On},U.createElement(Sn.Provider,{value:kn},c)),U.createElement(lo,{disabled:(d==null?void 0:d.restoreFocus)===!1})),U.createElement(cr,{...d,hiddenTextDescribedById:je}));function zn(){const P=(De==null?void 0:De.autoScrollEnabled)===!1,_=typeof u=="object"?u.enabled===!1:u===!1,X=b&&!P&&!_;return typeof u=="object"?{...u,enabled:X}:{enabled:X}}}),go=l.createContext(null),Qt="button",po="Draggable";function mo(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=Xe(po),{activators:a,activatorEvent:d,active:u,activeNodeRect:c,ariaDescribedById:h,draggableNodes:f,over:p}=l.useContext(it),{role:m=Qt,roleDescription:y="draggable",tabIndex:x=0}=o??{},S=(u==null?void 0:u.id)===t,R=l.useContext(S?Sn:go),[g,w]=Qe(),[D,C]=Qe(),b=Zr(a,t),v=Pe(n);ee(()=>(f.set(t,{id:t,key:s,node:g,activatorNode:D,data:v}),()=>{const M=f.get(t);M&&M.key===s&&f.delete(t)}),[f,t]);const N=l.useMemo(()=>({role:m,tabIndex:x,"aria-disabled":r,"aria-pressed":S&&m===Qt?!0:void 0,"aria-roledescription":y,"aria-describedby":h.draggable}),[r,m,x,S,y,h.draggable]);return{active:u,activatorEvent:d,activeNodeRect:c,attributes:N,isDragging:S,listeners:r?void 0:b,node:g,over:p,setNodeRef:w,setActivatorNodeRef:C,transform:R}}function vo(){return l.useContext(Cn)}const xo="Droppable",bo={timeout:25};function yo(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=Xe(xo),{active:a,dispatch:d,over:u,measureDroppableContainers:c}=l.useContext(it),h=l.useRef({disabled:n}),f=l.useRef(!1),p=l.useRef(null),m=l.useRef(null),{disabled:y,updateMeasurementsFor:x,timeout:S}={...bo,...o},R=Pe(x??r),g=l.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(R.current)?R.current:[R.current]),m.current=null},S)},[S]),w=st({callback:g,disabled:y||!a}),D=l.useCallback((N,M)=>{w&&(M&&(w.unobserve(M),f.current=!1),N&&w.observe(N))},[w]),[C,b]=Qe(D),v=Pe(t);return l.useEffect(()=>{!w||!C.current||(w.disconnect(),f.current=!1,w.observe(C.current))},[C,w]),l.useEffect(()=>(d({type:T.RegisterDroppable,element:{id:r,key:s,disabled:n,node:C,rect:p,data:v}}),()=>d({type:T.UnregisterDroppable,key:s,id:r})),[r]),l.useEffect(()=>{n!==h.current.disabled&&(d({type:T.SetDroppableDisabled,id:r,key:s,disabled:n}),h.current.disabled=n)},[r,s,n,d]),{active:a,rect:p,isOver:(u==null?void 0:u.id)===r,node:C,over:u,setNodeRef:b}}function Et(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function wo(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function Ve(e){return e!==null&&e>=0}function Co(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function So(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Nn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=Et(t,r,n),a=t[o],d=s[o];return!d||!a?null:{x:d.left-a.left,y:d.top-a.top,scaleX:d.width/a.width,scaleY:d.height/a.height}},Je={scaleX:1,scaleY:1},No=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:s,overIndex:a}=e;const d=(t=s[n])!=null?t:r;if(!d)return null;if(o===n){const c=s[a];return c?{x:0,y:n<a?c.top+c.height-(d.top+d.height):c.top-d.top,...Je}:null}const u=Do(s,o,n);return o>n&&o<=a?{x:0,y:-d.height-u,...Je}:o<n&&o>=a?{x:0,y:d.height+u,...Je}:{x:0,y:0,...Je}};function Do(e,t,n){const r=e[t],o=e[t-1],s=e[t+1];return r?n<t?o?r.top-(o.top+o.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const Dn="Sortable",jn=U.createContext({activeIndex:-1,containerId:Dn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Nn,disabled:{draggable:!1,droppable:!1}});function jo(e){let{children:t,id:n,items:r,strategy:o=Nn,disabled:s=!1}=e;const{active:a,dragOverlay:d,droppableRects:u,over:c,measureDroppableContainers:h}=vo(),f=Xe(Dn,n),p=d.rect!==null,m=l.useMemo(()=>r.map(b=>typeof b=="object"&&"id"in b?b.id:b),[r]),y=a!=null,x=a?m.indexOf(a.id):-1,S=c?m.indexOf(c.id):-1,R=l.useRef(m),g=!Co(m,R.current),w=S!==-1&&x===-1||g,D=So(s);ee(()=>{g&&y&&h(m)},[g,m,y,h]),l.useEffect(()=>{R.current=m},[m]);const C=l.useMemo(()=>({activeIndex:x,containerId:f,disabled:D,disableTransforms:w,items:m,overIndex:S,useDragOverlay:p,sortedRects:wo(m,u),strategy:o}),[x,f,D.draggable,D.droppable,w,m,S,u,p,o]);return U.createElement(jn.Provider,{value:C},t)}const Ro=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Et(n,r,o).indexOf(t)},Eo=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:a,previousItems:d,previousContainerId:u,transition:c}=e;return!c||!r||d!==s&&o===a?!1:n?!0:a!==o&&t===u},Io={duration:200,easing:"ease"},Rn="transform",Mo=Ue.Transition.toString({property:Rn,duration:0,easing:"linear"}),Ao={roleDescription:"sortable"};function ko(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,a]=l.useState(null),d=l.useRef(n);return ee(()=>{if(!t&&n!==d.current&&r.current){const u=o.current;if(u){const c=Ne(r.current,{ignoreTransform:!0}),h={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(h.x||h.y)&&a(h)}}n!==d.current&&(d.current=n)},[t,n,r,o]),l.useEffect(()=>{s&&a(null)},[s]),s}function To(e){let{animateLayoutChanges:t=Eo,attributes:n,disabled:r,data:o,getNewIndex:s=Ro,id:a,strategy:d,resizeObserverConfig:u,transition:c=Io}=e;const{items:h,containerId:f,activeIndex:p,disabled:m,disableTransforms:y,sortedRects:x,overIndex:S,useDragOverlay:R,strategy:g}=l.useContext(jn),w=Oo(r,m),D=h.indexOf(a),C=l.useMemo(()=>({sortable:{containerId:f,index:D,items:h},...o}),[f,o,D,h]),b=l.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:v,node:N,isOver:M,setNodeRef:j}=yo({id:a,data:C,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:b,...u}}),{active:E,activatorEvent:k,activeNodeRect:O,attributes:V,setNodeRef:De,listeners:Ge,isDragging:B,over:We,setActivatorNodeRef:te,transform:je}=mo({id:a,data:C,attributes:{...Ao,...n},disabled:w.draggable}),qe=Vn(j,De),F=!!E,ne=F&&!y&&Ve(p)&&Ve(S),he=!R&&B,Re=he&&ne?je:null,He=ne?Re??(d??g)({rects:x,activeNodeRect:O,activeIndex:p,overIndex:S,index:D}):null,ie=Ve(p)&&Ve(S)?s({id:a,items:h,activeIndex:p,overIndex:S}):D,re=E==null?void 0:E.id,A=l.useRef({activeId:re,items:h,newIndex:ie,containerId:f}),Ee=h!==A.current.items,J=t({active:E,containerId:f,isDragging:B,isSorting:F,id:a,index:D,items:h,newIndex:A.current.newIndex,previousItems:A.current.items,previousContainerId:A.current.containerId,transition:c,wasDragging:A.current.activeId!=null}),ge=ko({disabled:!J,index:D,node:N,rect:v});return l.useEffect(()=>{F&&A.current.newIndex!==ie&&(A.current.newIndex=ie),f!==A.current.containerId&&(A.current.containerId=f),h!==A.current.items&&(A.current.items=h)},[F,ie,f,h]),l.useEffect(()=>{if(re===A.current.activeId)return;if(re!=null&&A.current.activeId==null){A.current.activeId=re;return}const pe=setTimeout(()=>{A.current.activeId=re},50);return()=>clearTimeout(pe)},[re]),{active:E,activeIndex:p,attributes:V,data:C,rect:v,index:D,newIndex:ie,items:h,isOver:M,isSorting:F,isDragging:B,listeners:Ge,node:N,overIndex:S,over:We,setNodeRef:qe,setActivatorNodeRef:te,setDroppableNodeRef:j,setDraggableNodeRef:De,transform:ge??He,transition:oe()};function oe(){if(ge||Ee&&A.current.newIndex===D)return Mo;if(!(he&&!St(k)||!c)&&(F||J))return Ue.Transition.toString({...c,property:Rn})}}function Oo(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function nt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Lo=[I.Down,I.Right,I.Up,I.Left],zo=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:a,scrollableAncestors:d}}=t;if(Lo.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=o.get(f.id);if(p)switch(e.code){case I.Down:r.top<p.top&&u.push(f);break;case I.Up:r.top>p.top&&u.push(f);break;case I.Left:r.left>p.left&&u.push(f);break;case I.Right:r.left<p.left&&u.push(f);break}});const c=hr({collisionRect:r,droppableRects:o,droppableContainers:u});let h=un(c,"id");if(h===(a==null?void 0:a.id)&&c.length>1&&(h=c[1].id),h!=null){const f=s.get(n.id),p=s.get(h),m=p?o.get(p.id):null,y=p==null?void 0:p.node.current;if(y&&m&&f&&p){const S=ot(y).some((b,v)=>d[v]!==b),R=En(f,p),g=Po(f,p),w=S||!R?{x:0,y:0}:{x:g?r.width-m.width:0,y:g?r.height-m.height:0},D={x:m.left,y:m.top};return w.x&&w.y?D:Fe(D,w)}}}};function En(e,t){return!nt(e)||!nt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Po(e,t){return!nt(e)||!nt(t)||!En(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Fo=({image:e,index:t,onEdit:n,onDelete:r,onToggleFeatured:o,variants:s,isFeatured:a=!1})=>{const{attributes:d,listeners:u,setNodeRef:c,transform:h,transition:f,isDragging:p}=To({id:e.id}),m={transform:Ue.Transform.toString(h),transition:f};return i.jsxs(Y.div,{ref:c,style:m,...d,...u,className:`relative group aspect-square overflow-hidden bg-gray-100 ${p?"ring-2 ring-olive-light":""}`,variants:s,whileHover:{scale:1.02},transition:{duration:.2},children:[i.jsx("img",{src:e.image_path.startsWith("/storage/")?e.image_path:`/storage/${e.image_path}`,alt:e.alt_text||`Gallery image ${t+1}`,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 group-hover:bg-black/50 transition-all duration-300 flex items-center justify-center",children:i.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex space-x-1",children:[i.jsx("button",{onClick:y=>{y.stopPropagation(),o(e)},onPointerDown:y=>y.stopPropagation(),className:"p-1.5 bg-white/90 hover:bg-white/50 transition-all duration-200",title:a?"Remove from featured":"Add to featured",children:a?i.jsx(nn,{size:14,className:"text-yellow-600"}):i.jsx(rn,{size:14,className:"text-yellow-600"})}),i.jsx("button",{onClick:y=>{y.stopPropagation(),n(e)},onPointerDown:y=>y.stopPropagation(),className:"p-1.5 bg-white/90 hover:bg-white/50 transition-all duration-200",title:"Edit image",children:i.jsx(en,{size:14,className:"text-blue-600"})}),i.jsx("button",{onClick:y=>{y.stopPropagation(),r(e)},onPointerDown:y=>y.stopPropagation(),className:"p-1.5 bg-white/90 hover:bg-white/50 transition-all duration-200",title:"Delete image",children:i.jsx(tn,{size:14,className:"text-red-600"})})]})}),a&&i.jsx("div",{className:"absolute top-1 left-1",children:i.jsx("div",{className:"px-1.5 py-0.5 text-xs font-lexend font-medium bg-yellow-500 text-white",children:"FEATURED"})})]})},Uo=({images:e,onEdit:t,onDelete:n,onToggleFeatured:r,onReorder:o,onUpload:s,variants:a})=>{const d=dr(Bt(Rt),Bt(Dt,{coordinateGetter:zo})),u=c=>{const{active:h,over:f}=c;if(f&&h.id!==f.id){const p=Array.from(e),m=p.findIndex(R=>R.id===h.id),y=p.findIndex(R=>R.id===f.id),S=Et(p,m,y).map((R,g)=>({...R,sort_order:g+1}));o(S)}};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-lexend font-light text-olive text-lg mb-4 flex items-center",children:[i.jsx(rn,{size:20,className:"mr-2"}),"Featured Images"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[e.filter(c=>c.is_featured).slice(0,3).map((c,h)=>i.jsxs(Y.div,{className:"relative group aspect-square overflow-hidden bg-gray-100",variants:a,whileHover:{scale:1.02},transition:{duration:.2},children:[i.jsx("img",{src:c.image_path.startsWith("/storage/")?c.image_path:`/storage/${c.image_path}`,alt:c.alt_text||`Featured image ${h+1}`,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 group-hover:bg-black/50 transition-all duration-300 flex items-center justify-center",children:i.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex space-x-2",children:[i.jsx("button",{onClick:f=>{f.stopPropagation(),r(c)},className:"p-2 bg-white/90 hover:bg-white/50 transition-all duration-200",title:"Remove from featured",children:i.jsx(nn,{size:16,className:"text-yellow-600"})}),i.jsx("button",{onClick:f=>{f.stopPropagation(),t(c)},className:"p-2 bg-white/90 hover:bg-white/50 transition-all duration-200",title:"Edit image",children:i.jsx(en,{size:16,className:"text-blue-600"})}),i.jsx("button",{onClick:f=>{f.stopPropagation(),n(c)},className:"p-2 bg-white/90 hover:bg-white/50 transition-all duration-200",title:"Delete image",children:i.jsx(tn,{size:16,className:"text-red-600"})})]})}),i.jsx("div",{className:"absolute top-2 left-2",children:i.jsx("div",{className:"bg-yellow-500 text-white px-2 py-1 text-xs font-lexend font-medium",children:"FEATURED"})})]},c.id)),Array.from({length:3-e.filter(c=>c.is_featured).length}).map((c,h)=>i.jsx("div",{className:"aspect-square bg-gray-100 border-2 border-dashed border-gray-300 flex items-center justify-center",children:i.jsx("p",{className:"text-gray-400 font-lexend text-sm",children:"Empty Slot"})},`empty-featured-${h}`))]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-lexend font-light text-olive text-lg mb-4 flex items-center",children:[i.jsx(Gn,{size:20,className:"mr-2"}),"Gallery Images"]}),e.filter(c=>!c.is_featured).length>0?i.jsx(ho,{sensors:d,collisionDetection:fr,onDragEnd:u,children:i.jsx(jo,{items:e.filter(c=>!c.is_featured).map(c=>c.id),strategy:No,children:i.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:[e.filter(c=>!c.is_featured).map((c,h)=>i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -top-2 -left-2 z-10",children:i.jsx("div",{className:"w-6 h-6 bg-olive text-beige rounded-full flex items-center justify-center text-xs font-lexend font-medium",children:h+1})}),i.jsx(Fo,{image:c,index:h,onEdit:t,onDelete:n,onToggleFeatured:r,variants:a,isFeatured:!1})]},c.id)),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -top-2 -left-2 z-10",children:i.jsx("div",{className:"w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-lexend font-medium",children:e.filter(c=>!c.is_featured).length+1})}),i.jsx("button",{onClick:s,className:"w-full aspect-square bg-gray-100 border-2 border-dashed border-gray-300 hover:border-olive hover:bg-olive/5 transition-all duration-200 flex flex-col items-center justify-center group",children:i.jsxs("div",{className:"text-gray-400 group-hover:text-olive transition-colors duration-200",children:[i.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),i.jsx("p",{className:"text-sm font-lexend font-light",children:"Upload Image"})]})})]})]})})}):i.jsx("div",{className:"grid grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute -top-2 -left-2 z-10",children:i.jsx("div",{className:"w-6 h-6 bg-gray-400 text-white rounded-full flex items-center justify-center text-xs font-lexend font-medium",children:"1"})}),i.jsx("button",{onClick:s,className:"w-full aspect-square bg-gray-100 border-2 border-dashed border-gray-300 hover:border-olive hover:bg-olive/5 transition-all duration-200 flex flex-col items-center justify-center group",children:i.jsxs("div",{className:"text-gray-400 group-hover:text-olive transition-colors duration-200",children:[i.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),i.jsx("p",{className:"text-sm font-lexend font-light",children:"Upload Image"})]})})]})})]}),i.jsx("div",{className:"bg-gray-50 p-4 rounded-none",children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-lexend font-light text-olive",children:e.length}),i.jsx("p",{className:"text-sm text-gray-600 font-lexend",children:"Total Images"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-lexend font-light text-olive",children:e.filter(c=>c.is_featured).length}),i.jsx("p",{className:"text-sm text-gray-600 font-lexend",children:"Featured"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-lexend font-light text-olive",children:e.filter(c=>!c.is_featured).length}),i.jsx("p",{className:"text-sm text-gray-600 font-lexend",children:"Gallery"})]})]})})]})},$o=({image:e,onClose:t,onUpdate:n})=>{const[r,o]=l.useState(!1),[s,a]=l.useState(null),[d,u]=l.useState({x:0,y:0}),[c,h]=l.useState(1),[f,p]=l.useState(null),[m,y]=l.useState(!1),x=l.useRef(null),S=e.image_path.startsWith("/storage/")?e.image_path:`/storage/${e.image_path}`,R=b=>{var N;const v=(N=b.target.files)==null?void 0:N[0];if(v){const M=new FileReader;M.onload=()=>{a(M.result),o(!0)},M.readAsDataURL(v)}},g=(b,v)=>{p(v)},w=(b,v)=>new Promise((N,M)=>{const j=new Image;j.crossOrigin="anonymous",j.onload=()=>{const E=document.createElement("canvas"),k=E.getContext("2d");if(!k){M(new Error("No 2d context"));return}E.width=v.width,E.height=v.height,k.drawImage(j,v.x,v.y,v.width,v.height,0,0,v.width,v.height),E.toBlob(O=>{O?N(O):M(new Error("Canvas is empty"))},"image/jpeg",.9)},j.src=b}),D=async()=>{var b;if(!(!s||!f))try{y(!0);const v=await w(s,f),N=new FormData;N.append("image",v,"cropped-image.jpg"),N.append("_method","PUT"),N.append("_token",((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||"");const M=await fetch(`/admin/api/gallery-images/${e.id}`,{method:"POST",body:N});if(M.ok){const j=await M.json();n(j.image),t()}else throw new Error("Failed to update image")}catch(v){console.error("Error updating image:",v)}finally{y(!1),o(!1)}},C=()=>{var b;(b=x.current)==null||b.click()};return i.jsxs(i.Fragment,{children:[i.jsx(Y.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs(Y.div,{className:"bg-background text-olive rounded-none shadow-lg max-w-md w-full",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[i.jsx("h3",{className:"text-xl font-lexend font-semibold tracking-tighter",children:"Edit Image"}),i.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:i.jsx(gt,{size:20})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsx("img",{src:e.image_path.startsWith("/storage/")?e.image_path:`/storage/${e.image_path}`,alt:e.alt_text||"Gallery image",className:"w-full h-48 object-cover rounded-none"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:C,className:"w-full bg-olive hover:bg-olive-light text-beige font-lexend font-light py-3 px-4 rounded-none transition-colors duration-200 flex items-center justify-center",children:[i.jsx(on,{size:18,className:"mr-2"}),"Upload New Image"]}),i.jsxs("button",{onClick:()=>{a(S),u({x:0,y:0}),h(1),p(null),o(!0)},className:"w-full bg-gray-200 hover:bg-gray-300 text-olive font-lexend font-light py-3 px-4 rounded-none transition-colors duration-200 flex items-center justify-center",children:[i.jsx(_n,{size:18,className:"mr-2"}),"Crop Current Image"]})]}),i.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:R,className:"hidden"})]})]})}),r&&s&&i.jsx(Y.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-60 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:i.jsxs(Y.div,{className:"bg-white rounded-lg w-full max-w-3xl p-6 shadow-xl border border-gray-200",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},children:[i.jsx("h3",{className:"text-lg font-lexend mb-4",children:"Crop Image"}),i.jsx("div",{className:"relative w-full h-[50vh] bg-gray-100 rounded-md overflow-hidden mb-4",children:i.jsx(Un,{image:s,crop:d,zoom:c,aspect:1,onCropChange:u,onZoomChange:h,onCropComplete:g})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"Zoom"}),i.jsx("input",{type:"range",min:.5,max:3,step:.01,value:c,onChange:b=>h(parseFloat(b.target.value))}),i.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(c*100),"%"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{o(!1),s&&URL.revokeObjectURL(s),a(null)},className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md font-lexend",children:"Cancel"}),i.jsx("button",{onClick:D,disabled:m,className:"px-3 py-1.5 bg-olive text-beige rounded-md hover:bg-olive-dark font-lexend disabled:opacity-50",children:m?"Uploading...":"Apply Crop"})]})]})]})})]})},Qo=()=>{const{showNotification:e}=Pn(),[t,n]=l.useState([]),[r,o]=l.useState(!0),[s,a]=l.useState(!1),[d,u]=l.useState(null),[c,h]=l.useState(!1),[f,p]=l.useState(!1),[m,y]=l.useState(null);l.useEffect(()=>{x()},[]);const x=async()=>{try{const j=await fetch("/admin/api/gallery-images");if(j.ok){const E=await j.json();n(E)}else e("Failed to fetch gallery images","error")}catch(j){console.error("Error fetching gallery images:",j),e("Network error: Unable to fetch images","error")}finally{o(!1)}},S=j=>{y(j),p(!0)},R=async j=>{var E;n(j);try{const k=await fetch("/admin/api/gallery-images/reorder",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((E=document.querySelector('meta[name="csrf-token"]'))==null?void 0:E.getAttribute("content"))||""},body:JSON.stringify({images:j.map(O=>O.id)})});if(!k.ok){const O=await k.json();throw new Error(O.message||"Failed to reorder images")}e("Images reordered successfully!","success")}catch(k){console.error("Error reordering images:",k),e("Failed to reorder images","error"),x()}},g=j=>{u(j),a(!0)},w=async()=>{var j;if(d)try{(await fetch(`/admin/api/gallery-images/${d.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content"))||""}})).ok?(e("Gallery image deleted successfully!","success"),await x()):e("Failed to delete gallery image","error")}catch(E){console.error("Error deleting gallery image:",E),e("Network error: Unable to delete image","error")}finally{a(!1),u(null)}},D=()=>{h(!1),x(),e("Images uploaded successfully!","success")},C=j=>{n(E=>E.map(k=>k.id===j.id?j:k)),p(!1),y(null),e("Image updated successfully!","success")},b=async j=>{var E;try{(await fetch(`/admin/api/gallery-images/${j.id}/toggle-featured`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((E=document.querySelector('meta[name="csrf-token"]'))==null?void 0:E.getAttribute("content"))||""},body:JSON.stringify({is_featured:!j.is_featured})})).ok?(e(`Image ${j.is_featured?"removed from":"added to"} featured gallery`,"success"),await x()):e("Failed to update image status","error")}catch(k){console.error("Error updating image status:",k),e("Network error: Unable to update image","error")}},v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},N={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,ease:Ft}}},M={hidden:{scale:.95,opacity:0},visible:{scale:1,opacity:1,transition:{duration:.4,ease:Ft}},hover:{scale:1.01,transition:{duration:.2}}};return r?i.jsx(Pt,{children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(Y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-primary-light border-t-transparent rounded-none"})})}):i.jsx(Pt,{children:i.jsxs(Y.div,{className:"px-4 sm:px-6 md:px-8 lg:px-10 xl:px-12 2xl:px-12 py-6 sm:py-8 md:py-10 lg:py-10 xl:py-10 2xl:py-10 space-y-6 sm:space-y-6 md:space-y-8 lg:space-y-8 xl:space-y-8 2xl:space-y-8 font-lexend",variants:v,initial:"hidden",animate:"visible",children:[i.jsxs(Y.div,{className:"text-center",variants:N,children:[i.jsx("div",{className:"mb-4 sm:mb-4 md:mb-4 lg:mb-4 xl:mb-4 2xl:mb-4",children:i.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-6xl 2xl:text-6xl font-thin font-lexend text-olive",children:"GALLERY"})}),i.jsx("div",{className:"w-20 sm:w-24 md:w-28 lg:w-32 xl:w-32 2xl:w-32 h-[1px] bg-olive mx-auto",style:{opacity:.5}})]}),i.jsx(Y.div,{variants:N,children:i.jsx(Uo,{images:t,onEdit:S,onDelete:g,onToggleFeatured:b,onReorder:R,onUpload:()=>h(!0),variants:M})}),c&&i.jsx(Kn,{onClose:()=>h(!1),onSuccess:D}),f&&m&&i.jsx($o,{image:m,onClose:()=>{p(!1),y(null)},onUpdate:C}),i.jsx($n,{isOpen:s,onClose:()=>{a(!1),u(null)},onConfirm:w,title:"Delete Gallery Image",message:"Are you sure you want to delete this image? This action cannot be undone.",type:"cancel"})]})})};export{Qo as default};
