import{g as rt,r as C,u as de,j as u,J as ot}from"./app-DIQtzNIb.js";import{_ as it,a as D}from"./tslib.es6-CwyXKlH1.js";var te,ye;function at(){if(ye)return te;ye=1;var a=!1,i,e,t,r,o,n,s,l,d,p,h,m,g,b,E;function v(){if(!a){a=!0;var x=navigator.userAgent,_=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(x),N=/(Mac OS X)|(Windows)|(Linux)/.exec(x);if(m=/\b(iPhone|iP[ao]d)/.exec(x),g=/\b(iP[ao]d)/.exec(x),p=/Android/i.exec(x),b=/FBAN\/\w+;/i.exec(x),E=/Mobile/i.exec(x),h=!!/Win64/.exec(x),_){i=_[1]?parseFloat(_[1]):_[5]?parseFloat(_[5]):NaN,i&&document&&document.documentMode&&(i=document.documentMode);var w=/(?:Trident\/(\d+.\d+))/.exec(x);n=w?parseFloat(w[1])+4:i,e=_[2]?parseFloat(_[2]):NaN,t=_[3]?parseFloat(_[3]):NaN,r=_[4]?parseFloat(_[4]):NaN,r?(_=/(?:Chrome\/(\d+\.\d+))/.exec(x),o=_&&_[1]?parseFloat(_[1]):NaN):o=NaN}else i=e=t=o=r=NaN;if(N){if(N[1]){var R=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(x);s=R?parseFloat(R[1].replace("_",".")):!0}else s=!1;l=!!N[2],d=!!N[3]}else s=l=d=!1}}var j={ie:function(){return v()||i},ieCompatibilityMode:function(){return v()||n>i},ie64:function(){return j.ie()&&h},firefox:function(){return v()||e},opera:function(){return v()||t},webkit:function(){return v()||r},safari:function(){return j.webkit()},chrome:function(){return v()||o},windows:function(){return v()||l},osx:function(){return v()||s},linux:function(){return v()||d},iphone:function(){return v()||m},mobile:function(){return v()||m||g||p||E},nativeApp:function(){return v()||b},android:function(){return v()||p},ipad:function(){return v()||g}};return te=j,te}var ne,be;function st(){if(be)return ne;be=1;var a=!!(typeof window<"u"&&window.document&&window.document.createElement),i={canUseDOM:a,canUseWorkers:typeof Worker<"u",canUseEventListeners:a&&!!(window.addEventListener||window.attachEvent),canUseViewport:a&&!!window.screen,isInWorker:!a};return ne=i,ne}var re,we;function ct(){if(we)return re;we=1;var a=st(),i;a.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function e(t,r){if(!a.canUseDOM||r&&!("addEventListener"in document))return!1;var o="on"+t,n=o in document;if(!n){var s=document.createElement("div");s.setAttribute(o,"return;"),n=typeof s[o]=="function"}return!n&&i&&t==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}return re=e,re}var oe,Ce;function lt(){if(Ce)return oe;Ce=1;var a=at(),i=ct(),e=10,t=40,r=800;function o(n){var s=0,l=0,d=0,p=0;return"detail"in n&&(l=n.detail),"wheelDelta"in n&&(l=-n.wheelDelta/120),"wheelDeltaY"in n&&(l=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(s=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(s=l,l=0),d=s*e,p=l*e,"deltaY"in n&&(p=n.deltaY),"deltaX"in n&&(d=n.deltaX),(d||p)&&n.deltaMode&&(n.deltaMode==1?(d*=t,p*=t):(d*=r,p*=r)),d&&!s&&(s=d<1?-1:1),p&&!l&&(l=p<1?-1:1),{spinX:s,spinY:l,pixelX:d,pixelY:p}}return o.getEventType=function(){return a.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},oe=o,oe}var ie,_e;function ut(){return _e||(_e=1,ie=lt()),ie}var dt=ut();const pt=rt(dt);function ft(a,i,e,t,r,o){o===void 0&&(o=0);var n=Z(a,i,o),s=n.width,l=n.height,d=Math.min(s,e),p=Math.min(l,t);return d>p*r?{width:p*r,height:p}:{width:d,height:d/r}}function ht(a){return a.width>a.height?a.width/a.naturalWidth:a.height/a.naturalHeight}function V(a,i,e,t,r){r===void 0&&(r=0);var o=Z(i.width,i.height,r),n=o.width,s=o.height;return{x:Se(a.x,n,e.width,t),y:Se(a.y,s,e.height,t)}}function Se(a,i,e,t){var r=i*t/2-e/2;return Q(a,-r,r)}function Ee(a,i){return Math.sqrt(Math.pow(a.y-i.y,2)+Math.pow(a.x-i.x,2))}function je(a,i){return Math.atan2(i.y-a.y,i.x-a.x)*180/Math.PI}function mt(a,i,e,t,r,o,n){o===void 0&&(o=0),n===void 0&&(n=!0);var s=n?gt:vt,l=Z(i.width,i.height,o),d=Z(i.naturalWidth,i.naturalHeight,o),p={x:s(100,((l.width-e.width/r)/2-a.x/r)/l.width*100),y:s(100,((l.height-e.height/r)/2-a.y/r)/l.height*100),width:s(100,e.width/l.width*100/r),height:s(100,e.height/l.height*100/r)},h=Math.round(s(d.width,p.width*d.width/100)),m=Math.round(s(d.height,p.height*d.height/100)),g=d.width>=d.height*t,b=g?{width:Math.round(m*t),height:m}:{width:h,height:Math.round(h/t)},E=D(D({},b),{x:Math.round(s(d.width-b.width,p.x*d.width/100)),y:Math.round(s(d.height-b.height,p.y*d.height/100))});return{croppedAreaPercentages:p,croppedAreaPixels:E}}function gt(a,i){return Math.min(a,Math.max(0,i))}function vt(a,i){return i}function Re(a,i,e,t,r,o){var n=Z(i.width,i.height,e),s=Q(t.width/n.width*(100/a.width),r,o),l={x:s*n.width/2-t.width/2-n.width*s*(a.x/100),y:s*n.height/2-t.height/2-n.height*s*(a.y/100)};return{crop:l,zoom:s}}function xt(a,i,e){var t=ht(i);return e.height>e.width?e.height/(a.height*t):e.width/(a.width*t)}function yt(a,i,e,t,r,o){e===void 0&&(e=0);var n=Z(i.naturalWidth,i.naturalHeight,e),s=Q(xt(a,i,t),r,o),l=t.height>t.width?t.height/a.height:t.width/a.width,d={x:((n.width-a.width)/2-a.x)*l,y:((n.height-a.height)/2-a.y)*l};return{crop:d,zoom:s}}function ke(a,i){return{x:(i.x+a.x)/2,y:(i.y+a.y)/2}}function bt(a){return a*Math.PI/180}function Z(a,i,e){var t=bt(e);return{width:Math.abs(Math.cos(t)*a)+Math.abs(Math.sin(t)*i),height:Math.abs(Math.sin(t)*a)+Math.abs(Math.cos(t)*i)}}function Q(a,i,e){return Math.min(Math.max(a,i),e)}function Y(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return a.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var wt=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Ct=1,_t=3,St=1,Et=function(a){it(i,a);function i(){var e=a!==null&&a.apply(this,arguments)||this;return e.cropperRef=C.createRef(),e.imageRef=C.createRef(),e.videoRef=C.createRef(),e.containerPosition={x:0,y:0},e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.gestureZoomStart=0,e.gestureRotationStart=0,e.isTouching=!1,e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.currentDoc=typeof document<"u"?document:null,e.currentWindow=typeof window<"u"?window:null,e.resizeObserver=null,e.canonicalCroppedAreaPercentages=null,e.cachedCroppedAreaPixels=null,e.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},e.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!e.containerRef)){var t=!0;e.resizeObserver=new window.ResizeObserver(function(r){if(t){t=!1;return}e.computeSizes()}),e.resizeObserver.observe(e.containerRef)}},e.preventZoomSafari=function(t){return t.preventDefault()},e.cleanEvents=function(){e.currentDoc&&(e.currentDoc.removeEventListener("mousemove",e.onMouseMove),e.currentDoc.removeEventListener("mouseup",e.onDragStopped),e.currentDoc.removeEventListener("touchmove",e.onTouchMove),e.currentDoc.removeEventListener("touchend",e.onDragStopped),e.currentDoc.removeEventListener("gesturechange",e.onGestureChange),e.currentDoc.removeEventListener("gestureend",e.onGestureEnd),e.currentDoc.removeEventListener("scroll",e.onScroll))},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var t=e.computeSizes();t&&(e.emitCropData(),e.setInitialCrop(t)),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(t){if(e.props.initialCroppedAreaPercentages){var r=Re(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),o=r.crop,n=r.zoom;e.props.onCropChange(o),e.props.onZoomChange&&e.props.onZoomChange(n)}else if(e.props.initialCroppedAreaPixels){var s=yt(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),o=s.crop,n=s.zoom;e.props.onCropChange(o),e.props.onZoomChange&&e.props.onZoomChange(n)}},e.computeSizes=function(){var t,r,o,n,s,l,d=e.imageRef.current||e.videoRef.current;if(d&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect(),e.saveContainerPosition();var p=e.containerRect.width/e.containerRect.height,h=((t=e.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((r=e.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,m=((o=e.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((n=e.videoRef.current)===null||n===void 0?void 0:n.videoHeight)||0,g=d.offsetWidth<h||d.offsetHeight<m,b=h/m,E=void 0;if(g)switch(e.state.mediaObjectFit){default:case"contain":E=p>b?{width:e.containerRect.height*b,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/b};break;case"horizontal-cover":E={width:e.containerRect.width,height:e.containerRect.width/b};break;case"vertical-cover":E={width:e.containerRect.height*b,height:e.containerRect.height};break}else E={width:d.offsetWidth,height:d.offsetHeight};e.mediaSize=D(D({},E),{naturalWidth:h,naturalHeight:m}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var v=e.props.cropSize?e.props.cropSize:ft(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((s=e.state.cropSize)===null||s===void 0?void 0:s.height)!==v.height||((l=e.state.cropSize)===null||l===void 0?void 0:l.width)!==v.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(v),e.setState({cropSize:v},function(){e.applyCanonical(v)||e.recomputeCropPosition()}),e.props.setCropSize&&e.props.setCropSize(v),v}},e.applyCanonical=function(t){if(!e.canonicalCroppedAreaPercentages)return!1;var r=Re(e.canonicalCroppedAreaPercentages,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),o=r.crop,n=r.zoom;e.props.onZoomChange&&Math.abs(n-e.props.zoom)>1e-6&&e.props.onZoomChange(n);var s=Math.abs(o.x-e.props.crop.x),l=Math.abs(o.y-e.props.crop.y);return(s>1e-6||l>1e-6)&&e.props.onCropChange(o),e.emitCropData(),!0},e.saveContainerPosition=function(){if(e.containerRef){var t=e.containerRef.getBoundingClientRect();e.containerPosition={x:t.left,y:t.top}}},e.onMouseDown=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("mousemove",e.onMouseMove),e.currentDoc.addEventListener("mouseup",e.onDragStopped),e.saveContainerPosition(),e.onDragStart(i.getMousePoint(t)))},e.onMouseMove=function(t){return e.onDrag(i.getMousePoint(t))},e.onScroll=function(t){e.currentDoc&&(t.preventDefault(),e.saveContainerPosition())},e.onTouchStart=function(t){e.currentDoc&&(e.isTouching=!0,!(e.props.onTouchRequest&&!e.props.onTouchRequest(t))&&(e.currentDoc.addEventListener("touchmove",e.onTouchMove,{passive:!1}),e.currentDoc.addEventListener("touchend",e.onDragStopped),e.saveContainerPosition(),t.touches.length===2?e.onPinchStart(t):t.touches.length===1&&e.onDragStart(i.getTouchPoint(t.touches[0]))))},e.onTouchMove=function(t){t.preventDefault(),t.touches.length===2?e.onPinchMove(t):t.touches.length===1&&e.onDrag(i.getTouchPoint(t.touches[0]))},e.onGestureStart=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("gesturechange",e.onGestureChange),e.currentDoc.addEventListener("gestureend",e.onGestureEnd),e.gestureZoomStart=e.props.zoom,e.gestureRotationStart=e.props.rotation)},e.onGestureChange=function(t){if(t.preventDefault(),!e.isTouching){var r=i.getMousePoint(t),o=e.gestureZoomStart-1+t.scale;if(e.setNewZoom(o,r,{shouldUpdatePosition:!0}),e.props.onRotationChange){var n=e.gestureRotationStart+t.rotation;e.props.onRotationChange(n)}}},e.onGestureEnd=function(t){e.cleanEvents()},e.onDragStart=function(t){var r,o,n=t.x,s=t.y;e.dragStartPosition={x:n,y:s},e.dragStartCrop=D({},e.props.crop),(o=(r=e.props).onInteractionStart)===null||o===void 0||o.call(r)},e.onDrag=function(t){var r=t.x,o=t.y;e.currentWindow&&(e.rafDragTimeout&&e.currentWindow.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=e.currentWindow.requestAnimationFrame(function(){if(e.state.cropSize&&!(r===void 0||o===void 0)){var n=r-e.dragStartPosition.x,s=o-e.dragStartPosition.y,l={x:e.dragStartCrop.x+n,y:e.dragStartCrop.y+s},d=e.props.restrictPosition?V(l,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):l;e.props.onCropChange(d)}}))},e.onDragStopped=function(){var t,r;e.isTouching=!1,e.cleanEvents(),e.emitCropData(),(r=(t=e.props).onInteractionEnd)===null||r===void 0||r.call(t)},e.onWheel=function(t){if(e.currentWindow&&!(e.props.onWheelRequest&&!e.props.onWheelRequest(t))){t.preventDefault();var r=i.getMousePoint(t),o=pt(t).pixelY,n=e.props.zoom-o*e.props.zoomSpeed/200;e.setNewZoom(n,r,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var s,l;return(l=(s=e.props).onInteractionStart)===null||l===void 0?void 0:l.call(s)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=e.currentWindow.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var s,l;return(l=(s=e.props).onInteractionEnd)===null||l===void 0?void 0:l.call(s)})},250)}},e.getPointOnContainer=function(t,r){var o=t.x,n=t.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(o-r.x),y:e.containerRect.height/2-(n-r.y)}},e.getPointOnMedia=function(t){var r=t.x,o=t.y,n=e.props,s=n.crop,l=n.zoom;return{x:(r+s.x)/l,y:(o+s.y)/l}},e.setNewZoom=function(t,r,o){var n=o===void 0?{}:o,s=n.shouldUpdatePosition,l=s===void 0?!0:s;if(!(!e.state.cropSize||!e.props.onZoomChange)){var d=Q(t,e.props.minZoom,e.props.maxZoom);if(l){var p=e.getPointOnContainer(r,e.containerPosition),h=e.getPointOnMedia(p),m={x:h.x*d-p.x,y:h.y*d-p.y},g=e.props.restrictPosition?V(m,e.mediaSize,e.state.cropSize,d,e.props.rotation):m;e.props.onCropChange(g)}e.props.onZoomChange(d)}},e.getCropData=function(){if(!e.state.cropSize)return null;var t=e.props.restrictPosition?V(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return mt(t,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var t=e.getCropData();if(t){var r=t.croppedAreaPercentages,o=t.croppedAreaPixels;e.canonicalCroppedAreaPercentages=r,e.cachedCroppedAreaPixels=o,e.props.onCropComplete&&e.props.onCropComplete(r,o),e.props.onCropAreaChange&&e.props.onCropAreaChange(r,o)}},e.emitCropAreaChange=function(){var t=e.getCropData();if(t){var r=t.croppedAreaPercentages,o=t.croppedAreaPixels;e.canonicalCroppedAreaPercentages=r,e.cachedCroppedAreaPixels=o,e.props.onCropAreaChange&&e.props.onCropAreaChange(r,o)}},e.recomputeCropPosition=function(){if(e.state.cropSize){var t=e.props.restrictPosition?V(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;e.props.onCropChange(t),e.emitCropData()}},e.onKeyDown=function(t){var r,o,n=e.props,s=n.crop,l=n.onCropChange,d=n.keyboardStep,p=n.zoom,h=n.rotation,m=d;if(e.state.cropSize){t.shiftKey&&(m*=.2);var g=D({},s);switch(t.key){case"ArrowUp":g.y-=m,t.preventDefault();break;case"ArrowDown":g.y+=m,t.preventDefault();break;case"ArrowLeft":g.x-=m,t.preventDefault();break;case"ArrowRight":g.x+=m,t.preventDefault();break;default:return}e.props.restrictPosition&&(g=V(g,e.mediaSize,e.state.cropSize,p,h)),t.repeat||(o=(r=e.props).onInteractionStart)===null||o===void 0||o.call(r),l(g)}},e.onKeyUp=function(t){var r,o;switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t.preventDefault();break;default:return}e.emitCropData(),(o=(r=e.props).onInteractionEnd)===null||o===void 0||o.call(r)},e}return i.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=wt,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},i.prototype.componentWillUnmount=function(){var e,t;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((t=this.styleRef.parentNode)===null||t===void 0||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},i.prototype.componentDidUpdate=function(e){var t,r,o,n,s,l,d,p,h;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((t=e.cropSize)===null||t===void 0?void 0:t.height)!==((r=this.props.cropSize)===null||r===void 0?void 0:r.height)||((o=e.cropSize)===null||o===void 0?void 0:o.width)!==((n=this.props.cropSize)===null||n===void 0?void 0:n.width)?this.computeSizes():(((s=e.crop)===null||s===void 0?void 0:s.x)!==((l=this.props.crop)===null||l===void 0?void 0:l.x)||((d=e.crop)===null||d===void 0?void 0:d.y)!==((p=this.props.crop)===null||p===void 0?void 0:p.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((h=this.videoRef.current)===null||h===void 0||h.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},i.prototype.getAspect=function(){var e=this.props,t=e.cropSize,r=e.aspect;return t?t.width/t.height:r},i.prototype.getObjectFit=function(){var e,t,r,o;if(this.props.objectFit==="cover"){var n=this.imageRef.current||this.videoRef.current;if(n&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,l=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalWidth)||((t=this.videoRef.current)===null||t===void 0?void 0:t.videoWidth)||0,d=((r=this.imageRef.current)===null||r===void 0?void 0:r.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,p=l/d;return p<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},i.prototype.onPinchStart=function(e){var t=i.getTouchPoint(e.touches[0]),r=i.getTouchPoint(e.touches[1]);this.lastPinchDistance=Ee(t,r),this.lastPinchRotation=je(t,r),this.onDragStart(ke(t,r))},i.prototype.onPinchMove=function(e){var t=this;if(!(!this.currentDoc||!this.currentWindow)){var r=i.getTouchPoint(e.touches[0]),o=i.getTouchPoint(e.touches[1]),n=ke(r,o);this.onDrag(n),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=Ee(r,o),l=t.props.zoom*(s/t.lastPinchDistance);t.setNewZoom(l,n,{shouldUpdatePosition:!1}),t.lastPinchDistance=s;var d=je(r,o),p=t.props.rotation+(d-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(p),t.lastPinchRotation=d})}},i.prototype.render=function(){var e=this,t,r=this.props,o=r.image,n=r.video,s=r.mediaProps,l=r.cropperProps,d=r.transform,p=r.crop,h=p.x,m=p.y,g=r.rotation,b=r.zoom,E=r.cropShape,v=r.showGrid,j=r.roundCropAreaPixels,x=r.style,_=x.containerStyle,N=x.cropAreaStyle,w=x.mediaStyle,R=r.classes,P=R.containerClassName,A=R.cropAreaClassName,z=R.mediaClassName,k=(t=this.state.mediaObjectFit)!==null&&t!==void 0?t:this.getObjectFit();return C.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(S){return e.containerRef=S},"data-testid":"container",style:_,className:Y("reactEasyCrop_Container",P)},o?C.createElement("img",D({alt:"",className:Y("reactEasyCrop_Image",k==="contain"&&"reactEasyCrop_Contain",k==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",k==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",z)},s,{src:o,ref:this.imageRef,style:D(D({},w),{transform:d||"translate(".concat(h,"px, ").concat(m,"px) rotate(").concat(g,"deg) scale(").concat(b,")")}),onLoad:this.onMediaLoad})):n&&C.createElement("video",D({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Y("reactEasyCrop_Video",k==="contain"&&"reactEasyCrop_Contain",k==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",k==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",z)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:D(D({},w),{transform:d||"translate(".concat(h,"px, ").concat(m,"px) rotate(").concat(g,"deg) scale(").concat(b,")")}),controls:!1}),(Array.isArray(n)?n:[{src:n}]).map(function(L){return C.createElement("source",D({key:L.src},L))})),this.state.cropSize&&C.createElement("div",D({ref:this.cropperRef,style:D(D({},N),{width:j?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:j?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Y("reactEasyCrop_CropArea",E==="round"&&"reactEasyCrop_CropAreaRound",v&&"reactEasyCrop_CropAreaGrid",A)},l)))},i.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:_t,minZoom:Ct,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:St},i.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},i.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},i}(C.Component),ae={exports:{}},se,Ne;function jt(){if(Ne)return se;Ne=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return se=a,se}var ce,Le;function Rt(){if(Le)return ce;Le=1;var a=jt();function i(){}function e(){}return e.resetWarningCache=i,ce=function(){function t(n,s,l,d,p,h){if(h!==a){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}t.isRequired=t;function r(){return t}var o={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:r,element:t,elementType:t,instanceOf:r,node:t,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:e,resetWarningCache:i};return o.PropTypes=o,o},ce}var Pe;function kt(){return Pe||(Pe=1,ae.exports=Rt()()),ae.exports}var c=kt(),pe=function(){return pe=Object.assign||function(a){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},pe.apply(this,arguments)},We={onActivate:c.func,onAddUndo:c.func,onBeforeAddUndo:c.func,onBeforeExecCommand:c.func,onBeforeGetContent:c.func,onBeforeRenderUI:c.func,onBeforeSetContent:c.func,onBeforePaste:c.func,onBlur:c.func,onChange:c.func,onClearUndos:c.func,onClick:c.func,onContextMenu:c.func,onCommentChange:c.func,onCompositionEnd:c.func,onCompositionStart:c.func,onCompositionUpdate:c.func,onCopy:c.func,onCut:c.func,onDblclick:c.func,onDeactivate:c.func,onDirty:c.func,onDrag:c.func,onDragDrop:c.func,onDragEnd:c.func,onDragGesture:c.func,onDragOver:c.func,onDrop:c.func,onExecCommand:c.func,onFocus:c.func,onFocusIn:c.func,onFocusOut:c.func,onGetContent:c.func,onHide:c.func,onInit:c.func,onInput:c.func,onKeyDown:c.func,onKeyPress:c.func,onKeyUp:c.func,onLoadContent:c.func,onMouseDown:c.func,onMouseEnter:c.func,onMouseLeave:c.func,onMouseMove:c.func,onMouseOut:c.func,onMouseOver:c.func,onMouseUp:c.func,onNodeChange:c.func,onObjectResizeStart:c.func,onObjectResized:c.func,onObjectSelected:c.func,onPaste:c.func,onPostProcess:c.func,onPostRender:c.func,onPreProcess:c.func,onProgressState:c.func,onRedo:c.func,onRemove:c.func,onReset:c.func,onSaveContent:c.func,onSelectionChange:c.func,onSetAttrib:c.func,onSetContent:c.func,onShow:c.func,onSubmit:c.func,onUndo:c.func,onVisualAid:c.func,onSkinLoadError:c.func,onThemeLoadError:c.func,onModelLoadError:c.func,onPluginLoadError:c.func,onIconsLoadError:c.func,onLanguageLoadError:c.func,onScriptsLoad:c.func,onScriptsLoadError:c.func},Nt=pe({apiKey:c.string,licenseKey:c.string,id:c.string,inline:c.bool,init:c.object,initialValue:c.string,onEditorChange:c.func,value:c.string,tagName:c.string,tabIndex:c.number,cloudChannel:c.string,plugins:c.oneOfType([c.string,c.array]),toolbar:c.oneOfType([c.string,c.array]),disabled:c.bool,readonly:c.bool,textareaName:c.string,tinymceScriptSrc:c.oneOfType([c.string,c.arrayOf(c.string),c.arrayOf(c.shape({src:c.string,async:c.bool,defer:c.bool}))]),rollback:c.oneOfType([c.number,c.oneOf([!1])]),scriptLoading:c.shape({async:c.bool,defer:c.bool,delay:c.number})},We),Be=function(a){var i=a;return i&&i.tinymce?i.tinymce:null},le=function(a){return typeof a=="function"},De=function(a){return a in We},Me=function(a){return a.substr(2)},Lt=function(a,i,e,t,r,o,n){var s=Object.keys(r).filter(De),l=Object.keys(o).filter(De),d=s.filter(function(h){return o[h]===void 0}),p=l.filter(function(h){return r[h]===void 0});d.forEach(function(h){var m=Me(h),g=n[m];e(m,g),delete n[m]}),p.forEach(function(h){var m=t(a,h),g=Me(h);n[g]=m,i(g,m)})},Pt=function(a,i,e,t,r){return Lt(r,a.on.bind(a),a.off.bind(a),function(o,n){return function(s){var l;return(l=o(n))===null||l===void 0?void 0:l(s,a)}},i,e,t)},Te=0,Fe=function(a){var i=Date.now(),e=Math.floor(Math.random()*1e9);return Te++,a+"_"+e+Te+String(i)},ze=function(a){return a!==null&&(a.tagName.toLowerCase()==="textarea"||a.tagName.toLowerCase()==="input")},Oe=function(a){return typeof a>"u"||a===""?[]:Array.isArray(a)?a:a.split(" ")},Dt=function(a,i){return Oe(a).concat(Oe(i))},Mt=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Tt=function(a){if(!("isConnected"in Node.prototype)){for(var i=a,e=a.parentNode;e!=null;)i=e,e=i.parentNode;return i===a.ownerDocument}return a.isConnected},Ae=function(a,i){a!==void 0&&(a.mode!=null&&typeof a.mode=="object"&&typeof a.mode.set=="function"?a.mode.set(i):a.setMode(i))},zt=function(a){var i=Be(a);if(!i)throw new Error("tinymce should have been loaded into global scope");return i},Ie=function(a){return a.options&&a.options.isRegistered("disabled")},fe=function(){return fe=Object.assign||function(a){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},fe.apply(this,arguments)},Ot=function(a,i,e){var t,r,o=a.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=i.id,o.src=i.src,o.async=(t=i.async)!==null&&t!==void 0?t:!1,o.defer=(r=i.defer)!==null&&r!==void 0?r:!1;var n=function(){o.removeEventListener("load",n),o.removeEventListener("error",s),e(i.src)},s=function(l){o.removeEventListener("load",n),o.removeEventListener("error",s),e(i.src,l)};o.addEventListener("load",n),o.addEventListener("error",s),a.head&&a.head.appendChild(o)},At=function(a){var i={},e=function(n,s){var l=i[n];l.done=!0,l.error=s;for(var d=0,p=l.handlers;d<p.length;d++){var h=p[d];h(n,s)}l.handlers=[]},t=function(n,s,l){var d=function(x){return l!==void 0?l(x):console.error(x)};if(n.length===0){d(new Error("At least one script must be provided"));return}for(var p=0,h=!1,m=function(x,_){h||(_?(h=!0,d(_)):++p===n.length&&s())},g=0,b=n;g<b.length;g++){var E=b[g],v=i[E.src];if(v)v.done?m(E.src,v.error):v.handlers.push(m);else{var j=Fe("tiny-");i[E.src]={id:j,src:E.src,done:!1,error:null,handlers:[m]},Ot(a,fe({id:j},E),e)}}},r=function(){for(var n,s=0,l=Object.values(i);s<l.length;s++){var d=l[s],p=a.getElementById(d.id);p!=null&&p.tagName==="SCRIPT"&&((n=p.parentNode)===null||n===void 0||n.removeChild(p))}i={}},o=function(){return a};return{loadScripts:t,deleteScripts:r,getDocument:o}},It=function(){var a=[],i=function(r){var o=a.find(function(n){return n.getDocument()===r});return o===void 0&&(o=At(r),a.push(o)),o},e=function(r,o,n,s,l){var d=function(){return i(r).loadScripts(o,s,l)};n>0?setTimeout(d,n):d()},t=function(){for(var r=a.pop();r!=null;r=a.pop())r.deleteScripts()};return{loadList:e,reinitialize:t}},Wt=It(),Bt=function(){var a=function(i,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},a(i,e)};return function(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");a(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),H=function(){return H=Object.assign||function(a){for(var i,e=1,t=arguments.length;e<t;e++){i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},H.apply(this,arguments)},ue="change keyup compositionend setcontent CommentChange",Ft=function(a){Bt(i,a);function i(e){var t,r,o,n=a.call(this,e)||this;return n.rollbackTimer=void 0,n.valueCursor=void 0,n.rollbackChange=function(){var s=n.editor,l=n.props.value;s&&l&&l!==n.currentContent&&s.undoManager.ignore(function(){if(s.setContent(l),n.valueCursor&&(!n.inline||s.hasFocus()))try{s.selection.moveToBookmark(n.valueCursor)}catch{}}),n.rollbackTimer=void 0},n.handleBeforeInput=function(s){if(n.props.value!==void 0&&n.props.value===n.currentContent&&n.editor&&(!n.inline||n.editor.hasFocus()))try{n.valueCursor=n.editor.selection.getBookmark(3)}catch{}},n.handleBeforeInputSpecial=function(s){(s.key==="Enter"||s.key==="Backspace"||s.key==="Delete")&&n.handleBeforeInput(s)},n.handleEditorChange=function(s){var l=n.editor;if(l&&l.initialized){var d=l.getContent();n.props.value!==void 0&&n.props.value!==d&&n.props.rollback!==!1&&(n.rollbackTimer||(n.rollbackTimer=window.setTimeout(n.rollbackChange,typeof n.props.rollback=="number"?n.props.rollback:200))),d!==n.currentContent&&(n.currentContent=d,le(n.props.onEditorChange)&&n.props.onEditorChange(d,l))}},n.handleEditorChangeSpecial=function(s){(s.key==="Backspace"||s.key==="Delete")&&n.handleEditorChange(s)},n.initialise=function(s){var l,d,p;s===void 0&&(s=0);var h=n.elementRef.current;if(h){if(!Tt(h)){if(s===0)setTimeout(function(){return n.initialise(1)},1);else if(s<100)setTimeout(function(){return n.initialise(s+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var m=zt(n.view),g=H(H(H(H({},n.props.init),{selector:void 0,target:h,disabled:n.props.disabled,readonly:n.props.readonly,inline:n.inline,plugins:Dt((l=n.props.init)===null||l===void 0?void 0:l.plugins,n.props.plugins),toolbar:(d=n.props.toolbar)!==null&&d!==void 0?d:(p=n.props.init)===null||p===void 0?void 0:p.toolbar}),n.props.licenseKey?{license_key:n.props.licenseKey}:{}),{setup:function(b){n.editor=b,n.bindHandlers({}),n.inline&&!ze(h)&&b.once("PostRender",function(E){b.setContent(n.getInitialValue(),{no_events:!0})}),n.props.init&&le(n.props.init.setup)&&n.props.init.setup(b),n.props.disabled&&(Ie(n.editor)?n.editor.options.set("disabled",n.props.disabled):n.editor.mode.set("readonly"))},init_instance_callback:function(b){var E,v=n.getInitialValue();n.currentContent=(E=n.currentContent)!==null&&E!==void 0?E:b.getContent(),n.currentContent!==v&&(n.currentContent=v,b.setContent(v),b.undoManager.clear(),b.undoManager.add(),b.setDirty(!1)),n.props.init&&le(n.props.init.init_instance_callback)&&n.props.init.init_instance_callback(b)}});n.inline||(h.style.visibility=""),ze(h)&&(h.value=n.getInitialValue()),m.init(g)}},n.id=n.props.id||Fe("tiny-react"),n.elementRef=C.createRef(),n.inline=(o=(t=n.props.inline)!==null&&t!==void 0?t:(r=n.props.init)===null||r===void 0?void 0:r.inline)!==null&&o!==void 0?o:!1,n.boundHandlers={},n}return Object.defineProperty(i.prototype,"view",{get:function(){var e,t;return(t=(e=this.elementRef.current)===null||e===void 0?void 0:e.ownerDocument.defaultView)!==null&&t!==void 0?t:window},enumerable:!1,configurable:!0}),i.prototype.componentDidUpdate=function(e){var t=this,r,o;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=(r=this.currentContent)!==null&&r!==void 0?r:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact(function(){var l;if(!t.inline||n.hasFocus())try{l=n.selection.getBookmark(3)}catch{}var d=t.valueCursor;if(n.setContent(t.props.value),!t.inline||n.hasFocus())for(var p=0,h=[l,d];p<h.length;p++){var m=h[p];if(m)try{n.selection.moveToBookmark(m),t.valueCursor=m;break}catch{}}})}if(this.props.readonly!==e.readonly){var s=(o=this.props.readonly)!==null&&o!==void 0?o:!1;Ae(this.editor,s?"readonly":"design")}this.props.disabled!==e.disabled&&(Ie(this.editor)?this.editor.options.set("disabled",this.props.disabled):Ae(this.editor,this.props.disabled?"readonly":"design"))}},i.prototype.componentDidMount=function(){var e=this,t,r,o,n,s;if(Be(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(r=(t=this.props).onScriptsLoadError)===null||r===void 0||r.call(t,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((o=this.elementRef.current)===null||o===void 0)&&o.ownerDocument){var l=function(){var p,h;(h=(p=e.props).onScriptsLoad)===null||h===void 0||h.call(p),e.initialise()},d=function(p){var h,m;(m=(h=e.props).onScriptsLoadError)===null||m===void 0||m.call(h,p)};Wt.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(s=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.delay)!==null&&s!==void 0?s:0,l,d)}},i.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(ue,this.handleEditorChange),t.off(this.beforeInputEvent(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(r){t.off(r,e.boundHandlers[r])}),this.boundHandlers={},t.remove(),this.editor=void 0)},i.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},i.prototype.beforeInputEvent=function(){return Mt()?"beforeinput SelectionChange":"SelectionChange"},i.prototype.renderInline=function(){var e=this.props.tagName,t=e===void 0?"div":e;return C.createElement(t,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},i.prototype.renderIframe=function(){return C.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},i.prototype.getScriptSources=function(){var e,t,r=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.async,o=(t=this.props.scriptLoading)===null||t===void 0?void 0:t.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:r,defer:o}]:this.props.tinymceScriptSrc.map(function(d){return typeof d=="string"?{src:d,async:r,defer:o}:d});var n=this.props.cloudChannel,s=this.props.apiKey?this.props.apiKey:"no-api-key",l="https://cdn.tiny.cloud/1/".concat(s,"/tinymce/").concat(n,"/tinymce.min.js");return[{src:l,async:r,defer:o}]},i.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},i.prototype.bindHandlers=function(e){var t=this;if(this.editor!==void 0){Pt(this.editor,e,this.props,this.boundHandlers,function(s){return t.props[s]});var r=function(s){return s.onEditorChange!==void 0||s.value!==void 0},o=r(e),n=r(this.props);!o&&n?(this.editor.on(ue,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):o&&!n&&(this.editor.off(ue,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},i.propTypes=Nt,i.defaultProps={cloudChannel:"8"},i}(C.Component);const Ut=({content:a,onChange:i,onImageUpload:e,placeholder:t="Start writing your journal post...",height:r=600,toolbarContainerId:o})=>{const n=C.useRef(null),{showNotification:s}=de?de():{showNotification:(p,h)=>{}},l=p=>{i(p)},d=async(p,h)=>{var E;if(e)return e(p,h);const m=p.blob(),g=5*1024*1024;if(m.size>g)return s("Image exceeds the 5MB limit. Please choose a smaller file.","error"),Promise.reject("Image exceeds the 5MB limit. Please choose a smaller file.");const b=(v,j)=>new Promise((x,_)=>{const N=j.toLowerCase();if(v.type==="image/webp"||N.endsWith(".webp")){x({blob:v,filename:N.endsWith(".webp")?j:j.replace(/\.[^.]+$/,"")+".webp"});return}const w=new Image,R=URL.createObjectURL(v);w.crossOrigin="anonymous",w.onload=()=>{const P=document.createElement("canvas");P.width=w.width,P.height=w.height;const A=P.getContext("2d");if(!A){URL.revokeObjectURL(R),_(new Error("Canvas not supported"));return}A.drawImage(w,0,0);let z=.85;const k=L=>new Promise(S=>P.toBlob(S,"image/webp",L));(async()=>{let L=await k(z);if(!L){URL.revokeObjectURL(R),_(new Error("Failed to export WebP"));return}for(;L.size>g&&z>.5;){z-=.05;const S=await k(z);if(S)L=S;else break}URL.revokeObjectURL(R),x({blob:L,filename:j.replace(/\.[^.]+$/,"")+".webp"})})().catch(L=>{URL.revokeObjectURL(R),_(L)})},w.onerror=()=>{URL.revokeObjectURL(R),_(new Error("Failed to load image"))},w.src=R});try{const{blob:v,filename:j}=await b(m,p.filename());if(v.size>g)return s("Image exceeds the 5MB limit after conversion. Please choose a smaller file.","error"),Promise.reject("Image exceeds the 5MB limit after conversion. Please choose a smaller file.");const x=new FormData;x.append("file",v,j),x.append("_token",((E=document.querySelector('meta[name="csrf-token"]'))==null?void 0:E.getAttribute("content"))||"");const N=await(await fetch("/admin/api/journal-entries/upload-image",{method:"POST",body:x})).json();if(N.success){let R=N.url;try{if(typeof R=="string"&&/^https?:\/\//i.test(R)){const P=new URL(R);R=P.pathname+(P.search||"")}}catch{}return s("Image uploaded.","success"),R}const w=N.error||"Upload failed";return s(w,"error"),Promise.reject(w)}catch(v){const j=(v==null?void 0:v.message)||"Upload failed";return s(j,"error"),Promise.reject(j)}};return u.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:u.jsx(Ft,{tinymceScriptSrc:"https://cdn.jsdelivr.net/npm/tinymce@6/tinymce.min.js",onInit:(p,h)=>n.current=h,value:a,onEditorChange:l,init:{height:r,menubar:!1,...o?{fixed_toolbar_container:`#${o}`}:{},toolbar_sticky:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","help","wordcount","quickbars"],toolbar:["undo redo | bold italic | alignleft aligncenter alignright alignjustify | forecolor | image | removeformat | help","blocks | styles | fontsize | fontfamily ","bullist numlist outdent indent"],content_style:`
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-Thin.ttf') format('truetype');
              font-weight: 100;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-ExtraLight.ttf') format('truetype');
              font-weight: 200;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-Light.ttf') format('truetype');
              font-weight: 300;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-Regular.ttf') format('truetype');
              font-weight: 400;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-Medium.ttf') format('truetype');
              font-weight: 500;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-SemiBold.ttf') format('truetype');
              font-weight: 600;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-Bold.ttf') format('truetype');
              font-weight: 700;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-ExtraBold.ttf') format('truetype');
              font-weight: 800;
              font-display: swap;
            }
            @font-face {
              font-family: 'LexendGiga';
              src: url('/assets/font/LexendGiga-Black.ttf') format('truetype');
              font-weight: 900;
              font-display: swap;
            }
            body { 
              font-family: "LexendGiga", sans-serif; 
              font-size: 14px; 
              line-height: 1.6;
              overflow: visible !important;
            }
            .mce-content-body {
              overflow: visible !important;
            }
            .mce-edit-area {
              overflow: visible !important;
            }
            /* Ensure images fit within the editor content area */
            .mce-content-body img, .mce-content-body figure.image img {
              max-width: 100% !important;
              height: auto !important;
              display: block;
            }
            .mce-content-body figure.image {
              margin: 1rem 0;
            }
          `,placeholder:t,images_upload_handler:d,automatic_uploads:!0,file_picker_types:"image",image_advtab:!0,image_uploadtab:!0,paste_data_images:!0,paste_enable_default_filters:!1,paste_retain_style_properties:"color font-size font-family background-color",convert_urls:!1,relative_urls:!1,remove_script_host:!1,document_base_url:window.location.origin,image_caption:!0,image_title:!0,image_description:!0,quickbars_selection_toolbar:"bold italic | quicklink h2 h3 blockquote quickimage quicktable",quickbars_insert_toolbar:"quickimage quicktable",branding:!1,statusbar:!1,resize:!1,elementpath:!1,contextmenu:!1,scrollbar:"none",auto_focus:"false",font_family_formats:"LexendGiga=LexendGiga,sans-serif",fontsize_formats:"8pt 10pt 12pt 14pt 16pt 18pt 20pt 24pt 28pt 32pt 36pt 48pt 60pt 72pt",formats:{lexendthin:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"100"}},lexendextralight:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"200"}},lexendlight:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"300"}},lexendregular:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"400"}},lexendmedium:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"500"}},lexendsemibold:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"600"}},lexendbold:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"700"}},lexendextrabold:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"800"}},lexendblack:{inline:"span",styles:{"font-family":"LexendGiga","font-weight":"900"}}},style_formats:[{title:"Lexend Thin (100)",format:"lexendthin"},{title:"Lexend Extra Light (200)",format:"lexendextralight"},{title:"Lexend Light (300)",format:"lexendlight"},{title:"Lexend Regular (400)",format:"lexendregular"},{title:"Lexend Medium (500)",format:"lexendmedium"},{title:"Lexend Semi Bold (600)",format:"lexendsemibold"},{title:"Lexend Bold (700)",format:"lexendbold"},{title:"Lexend Extra Bold (800)",format:"lexendextrabold"},{title:"Lexend Black (900)",format:"lexendblack"}],setup:p=>{p.on("init",()=>{p.getContainer().style.border="none"})}}})})},Gt=({id:a,autosaveInterval:i=3e4}={})=>{const[e,t]=C.useState(null),[r,o]=C.useState(!1),[n,s]=C.useState(!1),[l,d]=C.useState(null),[p,h]=C.useState(null),[m,g]=C.useState(!1),b=C.useCallback(async()=>{if(a){o(!0),d(null);try{const x=await fetch(`/admin/api/journal-entries/${a}`);if(!x.ok)throw new Error(`Failed to fetch journal post: ${x.statusText}`);const _=await x.json();t(_)}catch(x){d(x instanceof Error?x.message:"Failed to fetch journal post")}finally{o(!1)}}},[a]),E=C.useCallback(async x=>{s(!0),d(null);try{const _=a??(e==null?void 0:e.id),N=!_,w=N?"/admin/api/journal-entries":`/admin/api/journal-entries/${_}`,R=N?"POST":"PUT",P=S=>S.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),A=S=>{const M={...x},U=P(x.title||"post");return M.slug=S?`${U}-${S}`:U,M.is_active=x.is_active?1:0,M.featured=x.featured?1:0,M.image&&typeof M.image=="string"&&delete M.image,M};async function z(S){var M,U;if(S.image&&typeof S.image!="string"){const T=new FormData;return T.append("title",S.title),T.append("excerpt",S.excerpt),T.append("content",S.content),T.append("is_active",String(S.is_active?1:0)),T.append("featured",String(S.featured?1:0)),S.published_at&&T.append("published_at",S.published_at),T.append("sort_order",String(S.sort_order??0)),T.append("slug",S.slug),S.meta_title&&T.append("meta_title",S.meta_title),S.meta_description&&T.append("meta_description",S.meta_description),T.append("image",S.image),fetch(w,{method:R,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":((M=document.querySelector('meta[name="csrf-token"]'))==null?void 0:M.getAttribute("content"))||""},body:T})}return fetch(w,{method:R,headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","X-CSRF-TOKEN":((U=document.querySelector('meta[name="csrf-token"]'))==null?void 0:U.getAttribute("content"))||""},body:JSON.stringify(A())})}let k=await z(A());if(!k.ok){const S=await k.text();if(/Duplicate entry|slug_unique/i.test(S)){const M=Date.now().toString(36).slice(-6);k=await z(A(M))}else throw new Error(`Failed to save journal post: ${k.status} ${k.statusText} ${S}`)}if(!k.ok){const S=await k.text();throw new Error(`Failed to save journal post: ${k.status} ${k.statusText} ${S}`)}const L=await k.json();return t(L),h(new Date),g(!1),{success:!0,message:"Journal post saved successfully",data:L}}catch(_){const N=_ instanceof Error?_.message:"Failed to save journal post";return d(N),{success:!1,message:N}}finally{s(!1)}},[a,e]),v=C.useCallback(async x=>{if(!(!m||n))try{await E(x)}catch(_){console.warn("Auto-save failed:",_)}},[m,n,E]),j=C.useCallback(()=>{g(!0)},[]);return C.useEffect(()=>{a&&b()},[a,b]),{journalPost:e,loading:r,saving:n,error:l,lastSaved:p,hasUnsavedChanges:m,fetchJournalPost:b,saveJournalPost:E,autoSave:v,markAsChanged:j,setJournalPost:t}},qt=(a,i,e=3e4)=>{C.useEffect(()=>{if(e<=0)return;const t=setInterval(()=>{a(i)},e);return()=>clearInterval(t)},[a,i,e])},$t=()=>{const{props:a}=ot(),{showNotification:i}=de(),e=window.location.pathname,t=e.includes("/new"),r=t?void 0:e.split("/").pop(),[o,n]=C.useState({title:"",excerpt:"",content:"",is_active:!0,featured:!1,image:void 0,published_at:"",sort_order:0,meta_title:"",meta_description:""}),[s,l]=C.useState(null),[d,p]=C.useState(!1),[h,m]=C.useState(!1),[g,b]=C.useState(null),[E,v]=C.useState({x:0,y:0}),[j,x]=C.useState(1),[_,N]=C.useState(null),{journalPost:w,loading:R,saving:P,error:A,lastSaved:z,hasUnsavedChanges:k,saveJournalPost:L,autoSave:S,markAsChanged:M,setJournalPost:U}=Gt({id:r?parseInt(r):void 0,autosaveInterval:3e4});qt(S,o,t?0:3e4),C.useEffect(()=>{const f=y=>{y.preventDefault(),y.stopPropagation()};return document.addEventListener("submit",f,!0),()=>document.removeEventListener("submit",f,!0)},[]),C.useEffect(()=>{w?n({title:w.title,excerpt:w.excerpt,content:w.content,is_active:w.is_active,featured:w.featured,image:w.image,published_at:w.published_at||"",sort_order:w.sort_order||0,meta_title:w.meta_title||"",meta_description:w.meta_description||""}):t&&fetch("/admin/api/journal-entries/next-sort").then(f=>f.json()).then(f=>{n(y=>({...y,sort_order:Math.max(1,parseInt(String(f.next||1)))}))}).catch(()=>{})},[w]);const[T,Ue]=C.useState(!1),[Ge,qe]=C.useState(!1),He=f=>{const y=document.createElement("div");return y.innerHTML=f||"",(y.textContent||y.innerText||"").replace(/\s+/g," ").trim()},he=(f,y)=>f.length>y?f.slice(0,y-1).trimEnd():f,Ze=f=>he((f||"").trim(),60),$e=(f,y)=>{const O=f&&f.trim()||He(y||"");return he(O,160)},Ve=Math.max(1,((w==null?void 0:w.sort_order)||0)+1);C.useEffect(()=>{n(f=>{const y={...f};return T||(y.meta_title=Ze(f.title||"")),Ge||(y.meta_description=$e(f.excerpt||"",f.content||"")),y})},[o.title,o.excerpt,o.content]);const B=(f,y)=>{n(O=>({...O,[f]:y})),M()},Je=f=>{B("content",f)},Ke=async f=>{const y=f.target.files&&f.target.files[0];if(!y)return;const O=5*1024*1024;if(y.size>O){i("Image exceeds the 5MB limit. Please choose a smaller file.","error");return}const I=URL.createObjectURL(y);b(I),m(!0),p(!1)},Xe=C.useCallback((f,y)=>{N(y)},[]),Ye=(f,y)=>new Promise(async(O,I)=>{const G=new Image;G.crossOrigin="anonymous",G.onload=()=>{const W=document.createElement("canvas");W.width=y.width,W.height=y.height;const $=W.getContext("2d");if(!$){I(new Error("Canvas unavailable"));return}$.drawImage(G,y.x,y.y,y.width,y.height,0,0,y.width,y.height),W.toBlob(F=>{F?O(F):I(new Error("Failed to crop"))},"image/png",1)},G.onerror=()=>I(new Error("Failed to load image")),G.src=f}),Qe=async()=>{if(!g||!_){m(!1);return}try{const f=await Ye(g,_),y=new File([f],"featured.png",{type:"image/png"}),I=await(W=>new Promise($=>{if(W.type==="image/webp"){$(W);return}const F=new Image;F.crossOrigin="anonymous";const ve=URL.createObjectURL(W);F.src=ve,F.onload=()=>{const J=document.createElement("canvas");J.width=F.width,J.height=F.height;const ee=J.getContext("2d");ee==null||ee.drawImage(F,0,0);let K=.85;const xe=q=>new Promise(X=>J.toBlob(X,"image/webp",q));(async()=>{let q=await xe(K);for(q||(q=new Blob([],{type:"image/webp"}));q.size>500*1024&&K>.5;){K-=.05;const X=await xe(K);if(X)q=X;else break}URL.revokeObjectURL(ve),$(new File([q],"featured.webp",{type:"image/webp"}))})()}}))(y),G=URL.createObjectURL(I);l(G),n(W=>({...W,image:I})),i("Image cropped and added.","success")}catch(f){console.error(f),i("Failed to crop image.","error")}finally{g&&URL.revokeObjectURL(g),m(!1),b(null)}},et=async()=>{try{const f=await L(o);U(y=>y?{...y,...o}:{...o}),i("Journal post saved successfully.","success")}catch(f){console.error("Save failed:",f),i("Failed to save journal post.","error")}},me=()=>{k&&!window.confirm("You have unsaved changes. Are you sure you want to leave?")||(window.location.href="/admin/journal")},tt=f=>f?f.toLocaleTimeString():"",ge=s||(typeof o.image=="string"?o.image:(w==null?void 0:w.image)||void 0),nt=f=>!f||f.startsWith("http")||f.startsWith("blob:")||f.startsWith("/")?f:f.startsWith("storage/")?`/${f}`:f.startsWith("public/")?`/${f}`:`/storage/${f}`;return R?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading journal post..."})]})}):A?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-destructive mb-4",children:u.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Journal Post"}),u.jsx("p",{className:"text-gray-600 mb-4",children:A}),u.jsx("button",{onClick:me,className:"px-4 py-2 bg-olive text-beige rounded-lg hover:bg-olive-dark transition-colors",children:"Back to Journal"})]})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsxs("div",{className:"sticky top-0 z-30 bg-white border-b border-gray-200",children:[u.jsxs("div",{className:"px-6 py-4 flex items-center justify-between font-lexend",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("button",{onClick:me,className:"flex items-center text-olive hover:text-olive transition-colors tracking-wide uppercase text-sm",children:[u.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Journal"]}),u.jsx("div",{className:"h-6 w-px bg-gray-300"}),u.jsx("h1",{className:"text-xl font-light tracking-wide uppercase text-gray-900",children:w?`Edit: ${w.title}`:"New Journal Post"})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[z&&u.jsxs("span",{children:["Last saved: ",tt(z)]}),u.jsx("span",{className:k?"text-destructive":"text-gray-400",children:k?" Unsaved changes":" All changes saved"}),P&&u.jsx("span",{className:"text-blue-500",children:" Saving..."})]}),u.jsx("button",{type:"button",onClick:f=>{f.preventDefault(),et()},disabled:P,className:"px-4 py-2 bg-olive text-beige rounded-lg hover:bg-olive-dark disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed transition-colors",children:P?"Saving...":"Save"})]})]}),u.jsxs("div",{className:"px-6 py-3 border-t border-gray-100 flex items-center gap-6 font-lexend flex-nowrap",children:[u.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-4 overflow-hidden",children:[u.jsxs("div",{className:"basis-2/5 min-w-[220px]",children:[u.jsx("label",{className:"block text-[11px] tracking-wide text-gray-600 mb-1 uppercase",children:"Meta Title (SEO)"}),u.jsx("input",{type:"text",value:o.meta_title||"",onChange:f=>{Ue(!0),B("meta_title",f.target.value)},className:"w-full h-9 px-3 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-olive focus:border-transparent bg-background text-foreground",placeholder:"SEO title (~60 chars)",maxLength:70})]}),u.jsxs("div",{className:"basis-3/5 min-w-[320px]",children:[u.jsx("label",{className:"block text-[11px] tracking-wide text-gray-600 mb-1 uppercase",children:"Meta Description (SEO)"}),u.jsx("input",{type:"text",value:o.meta_description||"",onChange:f=>{qe(!0),B("meta_description",f.target.value)},className:"w-full h-9 px-3 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-olive focus:border-transparent bg-background text-foreground",placeholder:"SEO description (~160 chars)",maxLength:200})]})]}),u.jsxs("div",{className:"flex items-center gap-6 text-sm shrink-0 pt-6",children:[u.jsxs("label",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-gray-600",children:"Sort"}),u.jsx("input",{type:"number",value:o.sort_order,onChange:f=>{const y=f.target.value,O=parseInt(y||"1"),I=Number.isFinite(O)&&O>0?O:1;B("sort_order",I)},onKeyDown:f=>{f.key==="Enter"&&(f.preventDefault(),f.stopPropagation())},className:"w-20 h-9 px-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-olive focus:border-transparent",placeholder:String(Ve)})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-gray-700",children:"Active"}),u.jsx("button",{type:"button",onClick:()=>B("is_active",!o.is_active),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-olive focus:ring-offset-2 ${o.is_active?"bg-olive":"bg-gray-200"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.is_active?"translate-x-6":"translate-x-1"}`})})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-gray-700",children:"Featured"}),u.jsx("button",{type:"button",onClick:()=>B("featured",!o.featured),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-olive focus:ring-offset-2 ${o.featured?"bg-olive":"bg-gray-200"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o.featured?"translate-x-6":"translate-x-1"}`})})]})]})]})]})]}),u.jsxs("div",{className:"flex-1 bg-background",children:[u.jsxs("div",{className:"relative h-96 sm:h-[500px] lg:h-[600px]",children:[u.jsx("div",{className:"absolute inset-0",children:ge?u.jsx("img",{src:nt(ge),alt:o.title||"Journal",className:"w-full h-full object-cover"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:"No featured image yet"})}),u.jsx("div",{className:"absolute inset-0 bg-black/40"}),u.jsx("div",{className:"absolute top-4 right-4 z-10",children:u.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-3 py-1.5 bg-olive text-beige rounded-md hover:bg-olive-dark transition-colors text-sm font-lexend tracking-wide uppercase",children:"Upload Featured Image"})}),u.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-white",children:u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"flex items-center text-sm font-lexend mb-4",children:[u.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),u.jsx("input",{type:"date",value:o.published_at?new Date(o.published_at).toISOString().slice(0,10):"",onChange:f=>B("published_at",f.target.value),className:"bg-white/80 text-gray-900 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500"})]}),u.jsx("input",{type:"text",value:o.title,onChange:f=>B("title",f.target.value),placeholder:"Title",className:"w-full bg-transparent text-3xl sm:text-4xl lg:text-5xl font-light font-lexend tracking-wide uppercase mb-4 placeholder-white/60 focus:outline-none break-words"}),u.jsx("textarea",{value:o.excerpt,onChange:f=>{B("excerpt",f.target.value),f.currentTarget.style.height="auto",f.currentTarget.style.height=f.currentTarget.scrollHeight+"px"},placeholder:"Excerpt",rows:2,className:"w-full bg-transparent text-lg font-lexend opacity-90 max-w-2xl placeholder-white/60 focus:outline-none break-words resize-none overflow-hidden"})]})})]}),u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[u.jsx("div",{className:"mb-8",children:u.jsxs("div",{className:"inline-flex items-center text-olive transition-colors font-lexend text-sm tracking-wide uppercase",children:[u.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Journal"]})}),u.jsx("div",{className:"bg-white border border-border rounded-lg mb-8 p-4",children:u.jsx(Ut,{content:o.content,onChange:Je,height:void 0})}),u.jsx("div",{className:"mt-16 pt-8 border-t border-border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsx("span",{className:"text-sm font-lexend text-muted-foreground tracking-wide uppercase",children:"Share this story"})}),u.jsxs("div",{className:"inline-flex items-center text-olive transition-colors font-lexend text-sm tracking-wide uppercase",children:[u.jsx("svg",{className:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Journal"]})]})})]})]}),d&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-40",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-md p-6 shadow-xl border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-lexend mb-1",children:"Upload Featured Image"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Allowed formats: JPG or PNG. Max size: 5MB. The image will be converted to WebP automatically."}),u.jsxs("div",{className:"rounded-md border border-gray-300 bg-gray-50 p-4 flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Choose JPG/PNG up to 5MB"}),u.jsxs("label",{className:"px-3 py-2 bg-olive text-beige rounded-md hover:bg-olive-dark transition-colors text-sm font-lexend cursor-pointer",children:["Choose File",u.jsx("input",{type:"file",accept:".jpg,.jpeg,.png,image/jpeg,image/png",onChange:f=>{Ke(f)},className:"hidden"})]})]}),u.jsx("div",{className:"mt-6 flex justify-end",children:u.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-3 py-1.5 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors font-lexend",children:"Cancel"})})]})}),h&&g&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-40",children:u.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl p-6 shadow-xl border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-lexend mb-4",children:"Adjust Featured Image (16:9)"}),u.jsx("div",{className:"relative w-full h-[50vh] bg-gray-100 rounded-md overflow-hidden mb-4",children:u.jsx(Et,{image:g,crop:E,zoom:j,aspect:16/9,onCropChange:v,onZoomChange:x,onCropComplete:Xe})}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"Zoom"}),u.jsx("input",{type:"range",min:1,max:3,step:.01,value:j,onChange:f=>x(parseFloat(f.target.value))})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{m(!1),g&&URL.revokeObjectURL(g),b(null)},className:"px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md font-lexend",children:"Cancel"}),u.jsx("button",{onClick:Qe,className:"px-3 py-1.5 bg-olive text-beige rounded-md hover:bg-olive-dark font-lexend",children:"Use Image"})]})]})]})})]})};export{$t as default};
