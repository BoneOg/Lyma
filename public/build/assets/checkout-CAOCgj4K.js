import{r as p,j as e,J as y,S as C}from"./app-Bow_XvUi.js";import{L as w}from"./layout-Ek7Tvw0M.js";import{P as j}from"./PatternBackground-Deb9uPiN.js";import{C as b}from"./circle-check-big-Vq6rElKo.js";import{C as N}from"./circle-alert-Bz1tbVsV.js";import{c as k}from"./createLucideIcon-WudOZZwX.js";import{R as _}from"./ReservationSummary-B8Asm7yY.js";import"./proxy-Bq_oMelL.js";import"./mail-BF3oc7_5.js";import"./phone-C0W2yLQe.js";import"./calendar-BRT-d7AZ.js";import"./clock-brK6bCbl.js";import"./users-DTgEhDfT.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],B=k("TriangleAlert",S),M=({open:o,title:a="Confirm Action",message:r="Are you sure you want to continue?",onCancel:t,onConfirm:i,confirmText:d="CONFIRM",cancelText:g="CANCEL",children:c,confirmDisabled:n=!1,cancelDisabled:m=!1,variant:f="default"})=>{if(p.useEffect(()=>{const s=u=>{u.key==="Escape"&&o&&t()};return o&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[o,t]),!o)return null;const l=(()=>{switch(f){case"destructive":return{icon:B,iconColor:"#ef4444",confirmBg:"#ef4444",confirmHoverBg:"#dc2626",iconBg:"#fef2f2",borderColor:"#fecaca"};case"success":return{icon:b,iconColor:"#22c55e",confirmBg:"#22c55e",confirmHoverBg:"#16a34a",iconBg:"#f0fdf4",borderColor:"#bbf7d0"};case"warning":return{icon:N,iconColor:"#f59e0b",confirmBg:"#f59e0b",confirmHoverBg:"#d97706",iconBg:"#fffbeb",borderColor:"#fed7aa"};default:return{icon:b,iconColor:"var(--color-olive)",confirmBg:"var(--color-olive)",confirmHoverBg:"var(--color-olive)",iconBg:"var(--color-beige)",borderColor:"var(--color-olive)"}}})(),h=l.icon;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 transition-all duration-300",onClick:t}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-2 sm:p-4",children:e.jsx("div",{className:"relative bg-white shadow-2xl max-w-md w-full mx-2 sm:mx-4 transform transition-all duration-300 scale-100",style:{backgroundColor:"var(--color-beige)",borderRadius:"0px",border:`1px solid ${l.borderColor}`,boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"p-4 sm:p-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-4 sm:mb-6 flex items-center justify-center",style:{backgroundColor:"transparent"},children:e.jsx(h,{className:"w-8 h-8 sm:w-12 sm:h-12",style:{color:l.iconColor}})}),e.jsx("h3",{className:"text-lg sm:text-2xl font-lexend font-medium mb-2 sm:mb-3 leading-tight",style:{color:"var(--color-olive)",letterSpacing:"0.05em"},children:a}),r&&e.jsx("p",{className:"text-sm sm:text-base font-lexend font-light mb-4 sm:mb-6 leading-relaxed max-w-sm mx-auto",style:{color:"var(--color-olive)",opacity:"0.8"},children:r}),c&&e.jsx("div",{className:"text-left mb-4 sm:mb-6 p-3 sm:p-4 bg-black/5",children:c}),e.jsxs("div",{className:"flex gap-2 sm:gap-3 mt-6 sm:mt-8",children:[e.jsx("button",{onClick:t,disabled:m,className:"flex-1 py-2.5 sm:py-3.5 px-4 sm:px-6 font-lexend font-light text-sm sm:text-base transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"transparent",color:m?"hsl(var(--muted-foreground))":"var(--color-olive)",letterSpacing:"0.05em",border:"1px solid var(--color-olive)",opacity:m?"0.5":"1"},children:g}),e.jsx("button",{onClick:i,disabled:n,className:"flex-1 py-2.5 sm:py-3.5 px-4 sm:px-6 font-lexend font-light text-sm sm:text-base transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:n?"#d1d5db":l.confirmBg,color:"white",letterSpacing:"0.05em",border:"none",borderRadius:"0px",boxShadow:n?"none":"0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseEnter:s=>{n||(s.currentTarget.style.backgroundColor=l.confirmHoverBg)},onMouseLeave:s=>{n||(s.currentTarget.style.backgroundColor=l.confirmBg)},children:d})]})]})})})]})},x=o=>{if(!o)return"";const a=o.toUpperCase();if(a.includes("AM")||a.includes("PM"))return o;const r=o.split(":");if(r.length<2)return o;let t=parseInt(r[0],10);const i=r[1],d=t>=12?"PM":"AM";return t=t%12,t===0&&(t=12),`${t}:${i.padStart(2,"0")} ${d}`},E=o=>new Date(o).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});function J(){const{reservation:o,specialHoursData:a}=y().props,[r,t]=p.useState(!1),[i,d]=p.useState(!1),[g,c]=p.useState(!1),n=E(o.reservation_date),m=new Date(o.reservation_date).getFullYear().toString(),f=a?`${x(a.special_start)} - ${x(a.special_end)} (Special Hours)`:o.time_slot?`${x(o.time_slot.start_time)} - ${x(o.time_slot.end_time)}`:"Time not specified",v=async()=>{var u;const h=`${o.guest_first_name} ${o.guest_last_name}`.trim(),s={to:o.guest_email,guest_name:h,phone:o.guest_phone||"",date_formatted:n,time_range:f,guest_count:o.guest_count};await fetch("/api/send-reservation-confirmation",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((u=document.querySelector('meta[name="csrf-token"]'))==null?void 0:u.content)||""},body:JSON.stringify(s)})},l=async()=>{c(!1),t(!0);try{C.post(`/checkout/${o.id}/confirm`,{},{onSuccess:async()=>{try{await v()}catch{}},onFinish:()=>t(!1)})}catch{t(!1)}};return e.jsxs(w,{children:[e.jsxs("div",{className:"min-h-screen bg-olive relative overflow-hidden",children:[e.jsx(j,{overrides:{grapes:"absolute -bottom-10 left-2 lg:left-6 w-22 lg:w-36 rotate-[-1deg] -translate-x-4"}}),e.jsx("div",{className:"relative z-10 min-h-screen flex flex-col",children:e.jsx("div",{className:"flex-grow flex items-center justify-center px-4 py-6",children:e.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[e.jsxs("div",{className:"text-center space-y-3 flex flex-col items-center justify-center mt-12",children:[e.jsx("h2",{className:"text-xl lg:text-6xl font-thin font-lexend tracking-[0.15em] whitespace-nowrap",style:{color:"var(--color-beige)"},children:"REVIEW & CONFIRM"}),e.jsx("div",{className:"w-42 h-px mx-auto",style:{backgroundColor:"hsl(var(--primary) / 0.3)"}})]}),e.jsx("div",{className:"transform transition-all duration-300 hover:scale-[1.01] ",children:e.jsx(_,{guestName:`${o.guest_first_name} ${o.guest_last_name}`,email:o.guest_email,phone:o.guest_phone,specialRequests:o.special_requests??null,dateLabel:n,yearLabel:m,timeLabel:f,guestCount:o.guest_count})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 max-w-1xl mx-auto",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"flex-1 py-4 px-6 font-light text-base font-lexend transition-all duration-300 transform hover:opacity-90 hover:scale-[1.02] active:scale-[0.98] hover:shadow-lg",style:{backgroundColor:"hsl(var(--primary)",color:"var(--color-beige)",letterSpacing:"0.05em",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.18)"},children:"BACK"}),e.jsx("button",{onClick:()=>c(!0),disabled:r||i,className:`flex-1 py-4 px-6 font-light text-base font-lexend transition-all duration-300 transform ${r||i?"cursor-not-allowed opacity-50 scale-95":"hover:opacity-90 hover:scale-[1.02] active:scale-[0.98] hover:shadow-lg"}`,style:{backgroundColor:r||i?"var(--color-beige) / 0.3)":"var(--color-beige-dark)",color:"var(--color-olive)",letterSpacing:"0.05em",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.18)"},children:r?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:"var(--color-beige)"}}),e.jsx("span",{children:"Processing..."})]}):"CONFIRM"})]})]})})})]}),e.jsx(M,{open:g,title:"Confirm Reservation",message:"Is this information correct?",onCancel:()=>c(!1),onConfirm:l,confirmText:"CONFIRM",cancelText:"CANCEL"})]})}export{J as default};
