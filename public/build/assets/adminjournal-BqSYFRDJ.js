import{j as e,u as y,r as n}from"./app-BqTWf9wC.js";import{A as f}from"./AdminLayout-D5sfHy4G.js";import{C as k}from"./AdminConfirmationModal-iXRF4LfB.js";import{P as E}from"./plus-DJq9zj6O.js";import{C as P,a as C}from"./chevron-right-DrY_HzB_.js";import{S,T as D}from"./trash-2-DwJX0PSC.js";import"./menu-DXaLpVjg.js";import"./createLucideIcon-BApghl5t.js";import"./proxy-CWx4gS9B.js";const A=({entries:s,previewIndex:r,onNextPreview:o,onPrevPreview:t,onGoToPreview:x,onAddNew:m})=>e.jsxs("div",{className:"bg-card rounded-lg p-6 mb-6 border border-border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground font-lexend",children:"Preview"}),e.jsxs("button",{onClick:m,className:"flex items-center gap-2 bg-olive text-beige px-6 py-3 rounded-lg hover:bg-olive-dark transition-colors font-lexend font-medium",children:[e.jsx(E,{className:"w-4 h-4"}),"Add New Entry"]})]}),e.jsxs("div",{className:"relative w-full h-64 bg-gray-900 rounded-lg overflow-hidden",children:[s.length>0?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:s[r].image.startsWith("/storage/")?s[r].image:`/storage/${s[r].image}`,alt:s[r].title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50"}),s.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t,className:"absolute left-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/30 hover:bg-black/50 rounded-full transition-colors","aria-label":"Previous preview",children:e.jsx(P,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:o,className:"absolute right-4 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/30 hover:bg-black/50 rounded-full transition-colors","aria-label":"Next preview",children:e.jsx(C,{className:"w-6 h-6 text-white"})})]}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:e.jsxs("div",{className:"flex justify-between items-end text-white",children:[e.jsx("h3",{className:"text-lg font-semibold font-lexend",children:s[r].title}),e.jsx("p",{className:"text-sm font-lexend",children:new Date(s[r].published_at).toLocaleDateString()})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:e.jsx("p",{className:"font-lexend",children:"No journal entries yet"})}),s.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:s.map((i,l)=>e.jsx("button",{onClick:()=>x(l),className:`w-2 h-2 rounded-full transition-colors ${l===r?"bg-white":"bg-white/50 hover:bg-white/75"}`,"aria-label":`Go to preview ${l+1}`},l))})]})]}),T=({entries:s,onEdit:r,onDelete:o})=>e.jsx("div",{className:"bg-card rounded-lg shadow border border-border",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-muted border-b border-border",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Image"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Excerpt"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Published"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Featured"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Order"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-muted-foreground uppercase tracking-wider font-lexend",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-card divide-y divide-border",children:s.map(t=>e.jsxs("tr",{className:"hover:bg-muted/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("img",{src:t.image.startsWith("/storage/")?t.image:`/storage/${t.image}`,alt:t.title,className:"w-16 h-16 object-cover rounded mx-auto"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("div",{className:"text-sm font-medium text-foreground font-lexend max-w-xs truncate",children:t.title})}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("div",{className:"text-sm text-muted-foreground font-lexend max-w-xs truncate",children:t.excerpt||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-muted-foreground font-lexend",children:t.published_at?new Date(t.published_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium font-lexend ${t.is_active?"bg-olive text-beige":"bg-destructive text-beige"}`,children:t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium font-lexend ${t.featured?"bg-olive text-beige":"bg-muted text-muted-foreground"}`,children:t.featured?"Featured":"Regular"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-muted-foreground font-lexend",children:t.sort_order}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>r(t),className:"text-primary hover:text-olive transition-colors p-1 rounded hover:bg-primary/10",children:e.jsx(S,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o(t),className:"text-destructive hover:text-destructive/80 transition-colors p-1 rounded hover:bg-destructive/10",children:e.jsx(D,{className:"w-4 h-4"})})]})})]},t.id))})]})})}),q=()=>{const{showNotification:s}=y(),[r,o]=n.useState([]),[t,x]=n.useState(!0),[m,i]=n.useState(0),[l,u]=n.useState(!1),[c,h]=n.useState(null);n.useEffect(()=>{p()},[]);const p=async()=>{try{const a=await fetch("/admin/api/journal-entries");if(a.ok){const d=await a.json();o(d)}else s("Failed to fetch journal entries","error")}catch(a){console.error("Error fetching journal entries:",a),s("Network error: Unable to fetch entries","error")}finally{x(!1)}},g=a=>{window.location.href=`/admin/journal/edit/${a.id}`},b=a=>{h(a),u(!0)},j=async()=>{var a;if(c)try{(await fetch(`/admin/api/journal-entries/${c.id}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""}})).ok?(s("Journal entry deleted successfully!","success"),await p(),i(0)):s("Failed to delete journal entry","error")}catch(d){console.error("Error deleting journal entry:",d),s("Network error: Unable to delete entry","error")}finally{u(!1),h(null)}},w=()=>{r.length>0&&i(a=>(a+1)%r.length)},N=()=>{r.length>0&&i(a=>(a-1+r.length)%r.length)},v=a=>{i(a)};return t?e.jsx(f,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):e.jsx(f,{children:e.jsxs("div",{className:"px-4 sm:px-6 md:px-8 lg:px-10 xl:px-12 2xl:px-12 py-6 sm:py-8 md:py-10 lg:py-10 xl:py-10 2xl:py-10 space-y-6 sm:space-y-6 md:space-y-8 lg:space-y-8 xl:space-y-8 2xl:space-y-8 font-lexend",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-4 sm:mb-4 md:mb-4 lg:mb-4 xl:mb-4 2xl:mb-4",children:e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-6xl 2xl:text-6xl font-thin font-lexend text-olive",children:"JOURNAL"})}),e.jsx("div",{className:"w-20 sm:w-24 md:w-28 lg:w-32 xl:w-32 2xl:w-32 h-[1px] bg-olive mx-auto",style:{opacity:.5}})]}),e.jsx(A,{entries:r,previewIndex:m,onNextPreview:w,onPrevPreview:N,onGoToPreview:v,onAddNew:()=>window.location.href="/admin/journal/new"}),e.jsx(T,{entries:r,onEdit:g,onDelete:b}),e.jsx(k,{isOpen:l,onClose:()=>{u(!1),h(null)},onConfirm:j,title:"Delete Journal Entry",message:`Are you sure you want to delete "${c==null?void 0:c.title}"? This action cannot be undone.`,type:"cancel"})]})})};export{q as default};
